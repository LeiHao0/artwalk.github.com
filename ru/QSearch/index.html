<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/ru/images/logo-192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/ru/images/logo-192.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/ru/images/logo.png">
  <link rel="mask-icon" href="/ru/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="rbaH_zC-qBwXaawJ10Mno3FHzv9HRFHGFdXx2f1BwyI">

<link rel="stylesheet" href="/ru/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.0/css/all.min.css">

<script data-ad-client="ca-pub-2317298287519457" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"leihao0.github.io","root":"/ru/","scheme":"Pisces","version":"8.0.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Поиск...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/ru/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="содержание исследования   Читать NTFS MFT  Построение хеш-таблицы.  Системный путь к файлу  Графический интерфейс и рабочие потоки  Множественные методы поиска.  Интерфейс MFC   план исследования   С">
<meta property="og:type" content="article">
<meta property="og:title" content="Принципиальная догадка и реализация всего">
<meta property="og:url" content="https://leihao0.github.io/ru/QSearch/index.html">
<meta property="og:site_name" content="LeiHao&#39;s Blog">
<meta property="og:description" content="содержание исследования   Читать NTFS MFT  Построение хеш-таблицы.  Системный путь к файлу  Графический интерфейс и рабочие потоки  Множественные методы поиска.  Интерфейс MFC   план исследования   С">
<meta property="og:locale" content="ru_RU">
<meta property="article:published_time" content="2012-05-26T14:44:42.000Z">
<meta property="article:modified_time" content="2020-12-20T23:53:08.458Z">
<meta property="article:author" content="LeiHao">
<meta property="article:tag" content="Programming">
<meta property="article:tag" content="Everything">
<meta property="article:tag" content="NTFS">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://leihao0.github.io/ru/QSearch/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'ru'
  };
</script>

  <title>Принципиальная догадка и реализация всего | LeiHao's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159363268-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-159363268-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?25f016f633270b8e0baf56c4fe6f2dc1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/ru/atom.xml" title="LeiHao's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Показать/скрыть меню">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/ru/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">LeiHao's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/ru/" rel="section"><i class="fa fa-home fa-fw"></i>Главная</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/ru/about/" rel="section"><i class="fa fa-user fa-fw"></i>О сайте</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/ru/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Архив</a>

  </li>
        <li class="menu-item menu-item-rss">

    <a href="/ru/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Поиск
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Поиск..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Содержание
        </li>
        <li class="sidebar-nav-overview">
          Обзор
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%D0%91%D1%8B%D1%81%D1%82%D1%80%D0%BE%D0%B5-%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%B4%D0%B8%D1%81%D0%BA%D0%B5-NTFS"><span class="nav-number">1.</span> <span class="nav-text">Быстрое размещение файлов на диске NTFS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5"><span class="nav-number">1.1.</span> <span class="nav-text">1. Введение</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%D0%9A%D1%80%D0%B0%D1%82%D0%BA%D0%BE%D0%B5-%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2-NTFS"><span class="nav-number">1.2.</span> <span class="nav-text">2 Краткое введение в NTFS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-NTFS"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 NTFS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%D0%A2%D0%B5%D0%BA%D1%83%D1%89%D0%B0%D1%8F-%D1%81%D0%B8%D1%82%D1%83%D0%B0%D1%86%D0%B8%D1%8F"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 Текущая ситуация</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0"><span class="nav-number">1.3.</span> <span class="nav-text">3 Подготовка</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%D0%98%D0%B4%D0%B5%D0%B8-%D0%B4%D0%B8%D0%B7%D0%B0%D0%B9%D0%BD%D0%B0"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 Идеи дизайна</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%D0%A7%D1%82%D0%BE-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-USN"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2 Что такое USN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%D0%9F%D0%BE%D1%87%D0%B5%D0%BC%D1%83-%D1%8D%D1%82%D0%BE-%D0%B1%D1%8B%D1%81%D1%82%D1%80%D0%BE"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3 Почему это быстро</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-%D0%9E%D0%BA%D1%80%D1%83%D0%B6%D0%B0%D1%8E%D1%89%D0%B0%D1%8F-%D1%81%D1%80%D0%B5%D0%B4%D0%B0"><span class="nav-number">1.3.4.</span> <span class="nav-text">3.4 Окружающая среда</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%D0%A0%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B"><span class="nav-number">1.4.</span> <span class="nav-text">4 Реализация программы</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%D0%A7%D1%82%D0%B5%D0%BD%D0%B8%D0%B5-USN"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.1 Чтение USN</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B8%D1%82%D1%8C-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82-%D0%B4%D0%B8%D1%81%D0%BA%D0%B0"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">4.1.1 Определить формат диска</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2-%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B4%D0%B5%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D1%80%D0%B0-%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D0%B0"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">4.1.2 Получение дескриптора дисковода</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-%D0%98%D0%BD%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB-USN"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">4.1.3 Инициализировать журнал USN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-4-%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%B8-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB%D0%B0-USN"><span class="nav-number">1.4.1.4.</span> <span class="nav-text">4.1.4 Получение информации журнала USN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-5-%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%B8-%D0%BE-%D1%84%D0%B0%D0%B9%D0%BB%D0%B5-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB%D0%B0-USN"><span class="nav-number">1.4.1.5.</span> <span class="nav-text">4.1.5 Получение информации о файле журнала USN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-6-%D0%A3%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C-%D1%84%D0%B0%D0%B9%D0%BB-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB%D0%B0-USN"><span class="nav-number">1.4.1.6.</span> <span class="nav-text">4.1.6 Удалить файл журнала USN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-7-%D0%A0%D0%B5%D0%B7%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D1%82%D1%8B-%D0%BF%D0%B5%D1%80%D0%B5%D0%B1%D0%BE%D1%80%D0%B0-%D0%B2%D1%81%D0%B5%D1%85-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"><span class="nav-number">1.4.1.7.</span> <span class="nav-text">4.1.7 Результаты перебора всех файлов</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%D0%A1%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D0%B0"><span class="nav-number">1.4.2.</span> <span class="nav-text">4.2 Сборка данных поиска</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1-%D0%9F%D0%BE%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%B0"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">4.2.1 Построение вектора</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-2-%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%85%D0%B5%D1%88-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">4.2.2 Создание хеш-таблицы</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-3-%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">4.2.3 Вставить данные:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81"><span class="nav-number">1.4.3.</span> <span class="nav-text">4.3 Интерфейс</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-1-%D0%9F%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF-KISS"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">4.3.1 Принцип KISS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-2-%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">4.3.2 Функция</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-%D0%9F%D1%80%D0%B8%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B8%D1%82%D1%8C%D1%81%D1%8F-%D0%BA-%D1%82%D0%B5%D0%BC%D0%B5"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.4 Присоединиться к теме</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-1-%D0%97%D0%B0%D1%87%D0%B5%D0%BC-%D0%BF%D1%80%D0%B8%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D1%8F%D1%82%D1%8C%D1%81%D1%8F-%D0%BA-%D1%82%D0%B5%D0%BC%D0%B0%D0%BC"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">4.4.1 Зачем присоединяться к темам</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-2-%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%BF%D0%BE%D1%82%D0%BE%D0%BA%D0%B0-%D0%B2-MFC"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">4.4.2 Запуск рабочего потока в MFC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-3-%D0%A1%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%82%D1%8C-%D0%B2-%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D1%8C-%D1%83%D0%B2%D0%B5%D0%B4%D0%BE%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D0%B9"><span class="nav-number">1.4.4.3.</span> <span class="nav-text">4.4.3 Свернуть в область уведомлений</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-%D0%9D%D0%B0%D0%B9%D1%82%D0%B8"><span class="nav-number">1.4.5.</span> <span class="nav-text">4.5 Найти</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-1-%D0%9F%D0%BE%D0%B4%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BE%D1%87%D0%BD%D1%8B%D0%B9-%D0%B7%D0%BD%D0%B0%D0%BA"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">4.5.1 Подстановочный знак</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-2-%D0%9A%D0%BE%D1%80%D0%BF%D1%83%D1%81-%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA"><span class="nav-number">1.4.5.2.</span> <span class="nav-text">4.5.2 Корпус, порядок</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-3-%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B4%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F-%D0%B8-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B9-%D0%BF%D1%83%D1%82%D1%8C"><span class="nav-number">1.4.5.3.</span> <span class="nav-text">4.5.3 Конфиденциальность пользователя и системный путь</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-4-%D0%A0%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F"><span class="nav-number">1.4.5.4.</span> <span class="nav-text">4.5.4 Реализация</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-5-%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%BF%D1%83%D1%82%D0%B8"><span class="nav-number">1.4.5.5.</span> <span class="nav-text">4.5.5 Вывод пути</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7-%D1%81%D0%BB%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8"><span class="nav-number">1.5.</span> <span class="nav-text">5 Анализ сложности</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%D0%92%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F-%D1%81%D0%BB%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D1%8C"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1 Временная сложность</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%D0%A1%D0%BB%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D1%8C-%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%B0"><span class="nav-number">1.5.2.</span> <span class="nav-text">5.2 Сложность пространства</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%D0%92%D0%BE%D0%B7%D0%BD%D0%B8%D0%BA%D1%88%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B"><span class="nav-number">1.6.</span> <span class="nav-text">6 Возникшие проблемы</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%D0%9D%D0%B5%D0%B2%D0%BE%D0%B7%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE-%D0%B8%D0%BD%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D1%84%D0%B0%D0%B9%D0%BB-USN"><span class="nav-number">1.6.1.</span> <span class="nav-text">6.1 Невозможно инициализировать файл USN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D0%B0-wchar-%D0%B8-char-%D0%B2-%D1%8E%D0%BD%D0%B8%D0%BA%D0%BE%D0%B4%D0%B5"><span class="nav-number">1.6.2.</span> <span class="nav-text">6.2 Проблема wchar и char в юникоде</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D0%B0-%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-ifdef"><span class="nav-number">1.6.3.</span> <span class="nav-text">6.3 Проблема положения #ifdef</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-%D0%9F%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B0-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%B2"><span class="nav-number">1.6.4.</span> <span class="nav-text">6.4 Передача параметров</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%D0%BD%D0%B5%D0%B1%D0%BE%D0%BB%D1%8C%D1%88%D0%B8%D1%85-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B9"><span class="nav-number">1.7.</span> <span class="nav-text">7 небольших оптимизаций</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%D0%A1%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C-%D1%87%D1%82%D0%B5%D0%BD%D0%B8%D1%8F"><span class="nav-number">1.7.1.</span> <span class="nav-text">7.1 Скорость чтения</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-%D0%9C%D0%B5%D1%82%D0%BE%D0%B4-%D0%BE%D1%82%D0%BA%D1%80%D1%8B%D1%82%D0%B8%D1%8F-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0"><span class="nav-number">1.7.2.</span> <span class="nav-text">7.2 Метод открытия файла</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-%D0%98%D0%BD%D0%B4%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D1%80-%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F"><span class="nav-number">1.7.3.</span> <span class="nav-text">7.3 Индикатор выполнения</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%D0%97%D0%B0%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5"><span class="nav-number">2.</span> <span class="nav-text">8 Заключение</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%D0%A0%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8"><span class="nav-number">3.</span> <span class="nav-text">Рекомендации</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%D0%A0%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5-%D0%BD%D0%B0-%D0%B0%D0%BD%D0%B3%D0%BB%D0%B8%D0%B9%D1%81%D0%BA%D0%BE%D0%BC-%D1%8F%D0%B7%D1%8B%D0%BA%D0%B5"><span class="nav-number">4.</span> <span class="nav-text">Резюме на английском языке</span></a></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LeiHao</p>
  <div class="site-description" itemprop="description">😃😃😃</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/ru/archives/">
        
          <span class="site-state-item-count">160</span>
          <span class="site-state-item-name">Архив</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/ru/tags/">
        <span class="site-state-item-count">81</span>
        <span class="site-state-item-name">Тэги</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/leihao0" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;leihao0" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/leihao0" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;leihao0" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/leihao0" title="Linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;leihao0" rel="noopener" target="_blank"><i class="fab fa-linkedin-in fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" class="cc-opacity" rel="noopener" target="_blank"><img src="/ru/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="ru">
    <link itemprop="mainEntityOfPage" href="https://leihao0.github.io/ru/QSearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/ru/images/avatar.gif">
      <meta itemprop="name" content="LeiHao">
      <meta itemprop="description" content="😃😃😃">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeiHao's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Принципиальная догадка и реализация всего
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Размещено</span>

      <time title="Создано: 2012-05-26 22:44:42" itemprop="dateCreated datePublished" datetime="2012-05-26T22:44:42+08:00">2012-05-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Изменено</span>
        <time title="Изменено: 2020-12-21 07:53:08" itemprop="dateModified" datetime="2020-12-21T07:53:08+08:00">2020-12-21</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/ru/QSearch/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="QSearch/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="Кол-во символов в статье">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Кол-во символов в статье: </span>
      <span>25k</span>
    </span>
    <span class="post-meta-item" title="Время чтения">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Время чтения &asymp;</span>
      <span>23 мин.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>содержание исследования </p>
<ol>
<li>Читать NTFS MFT </li>
<li>Построение хеш-таблицы. </li>
<li>Системный путь к файлу </li>
<li>Графический интерфейс и рабочие потоки </li>
<li>Множественные методы поиска. </li>
<li>Интерфейс MFC </li>
</ol>
<p>план исследования </p>
<ul>
<li>С начала апреля до середины апреля для определения направления исследований. </li>
<li>С конца апреля до конца апреля. Подготовка к каждому баллу знаний, простой тест. </li>
<li>В начале мая разработка и отладка программ разработки и эксплуатации. </li>
<li>Середина мая-конец мая Написание дипломной работы по дизайну </li>
</ul>
<p>Особенности и инновации </p>
<ol>
<li>Использование ЦП и памяти в разумных пределах </li>
<li>Программа стабильна и предоставляет различные возможности поиска. </li>
<li>По сравнению с функцией поиска в Windows скорость расположения файлов очень высока. </li>
</ol>
<h1 id="Быстрое-размещение-файлов-на-диске-NTFS"><a href="#Быстрое-размещение-файлов-на-диске-NTFS" class="headerlink" title="Быстрое размещение файлов на диске NTFS"></a>Быстрое размещение файлов на диске NTFS</h1><p><strong>Резюме</strong> </p>
<blockquote>
<p>В этой статье рассказывается, как перечислить имена всех файлов и папок на жестком диске в формате диска Windows NTFS и использовать STL C ++ для построения хэш-таблицы, а также графического интерфейса и рабочих потоков MFC, и, наконец, реализовать реализацию на основе ключевых слов, введенных пользователем. Выполните поиск так же просто, как поиск по ключевым словам Google, а затем мгновенно верните все подходящие файлы / папки и рекурсивно получите системный путь к файлу / папке. </p>
</blockquote>
<p>** Ключевые слова *<em>: *</em> NTFS, быстро, ключевое слово, поиск, путь к файлу ** </p>
<h2 id="1-Введение"><a href="#1-Введение" class="headerlink" title="1. Введение"></a>1. Введение</h2><p>Структура каталогов Windows. В NTFS-томах файлы<br>Оформить в виде дерева B +, нажимать при поиске файлов в каталоге<br>Метод поиска по дереву B + сначала выполняет поиск корневого узла (начиная с корневого каталога), а затем сравнивает имя файла, который нужно найти, с именем файла, соответствующим дочернему узлу в корневом узле, чтобы определить, какой дочерний узел соответствует области хранения для поиска, а затем Используйте дочерний узел в качестве текущего корневого узла и повторите поиск, пока не найдете файл. ^ [1] ^ </p>
<p>Хотя поиск, предоставляемый системой Microsoft, может искать текстовое содержимое, скорость очень неудовлетворительна. В большинстве случаев нам просто нужно знать, в какой папке на компьютере хранится файл, и эта программа очень хорошо это решает. </p>
<h2 id="2-Краткое-введение-в-NTFS"><a href="#2-Краткое-введение-в-NTFS" class="headerlink" title="2 Краткое введение в NTFS"></a>2 Краткое введение в NTFS</h2><h3 id="2-1-NTFS"><a href="#2-1-NTFS" class="headerlink" title="2.1 NTFS"></a>2.1 NTFS</h3><p>NTFS (файловая система новой технологии) 是 Windows<br>Стандартная файловая система NT и более поздних версий Windows. NTFS заменяет файловую систему таблицы размещения файлов (FAT) и обеспечивает файловую систему для операционных систем Microsoft серии Windows. NTFS внесла несколько улучшений в FAT и HPFS (High Performance File System). Например, она поддерживает метаданные и использует расширенные структуры данных для повышения производительности, надежности и использования дискового пространства. ^ [2] ^ </p>
<h3 id="2-2-Текущая-ситуация"><a href="#2-2-Текущая-ситуация" class="headerlink" title="2.2 Текущая ситуация"></a>2.2 Текущая ситуация</h3><p>С Windows на базе NT<br>С появлением 2000 / XP многие пользователи начали использовать NTFS. NTFS также хранит файлы данных в кластерах, но размер кластеров в NTFS не зависит от размера диска или раздела. Уменьшение размера кластера не только уменьшает бесполезное использование дискового пространства, но также снижает вероятность фрагментации диска. NTFS поддерживает функцию управления шифрованием файлов, которая может предоставить пользователям более высокий уровень безопасности. ^ [3] ^ </p>
<h2 id="3-Подготовка"><a href="#3-Подготовка" class="headerlink" title="3 Подготовка"></a>3 Подготовка</h2><h3 id="3-1-Идеи-дизайна"><a href="#3-1-Идеи-дизайна" class="headerlink" title="3.1 Идеи дизайна"></a>3.1 Идеи дизайна</h3><p>Считайте все имена файлов на диске как данные и сопоставьте данные в соответствии с ключевыми словами, введенными пользователем. Правильный путь возвращается пользователю вместе с путем, чтобы облегчить открытие файла. </p>
<p>Конкретная идея дизайна показана на рисунке 3-1. </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_00.jpg">Рис. 3-1. Идеи дизайна</a> </p>
<p>Самым большим преимуществом хеш-таблицы является то, что она значительно сокращает время, затрачиваемое на хранение и поиск данных, что почти можно рассматривать как постоянное время; стоимость только в том, чтобы потреблять больше памяти. Однако, когда объем доступной памяти становится все больше, стоит обменять пространство на время. Кроме того, простота кодирования также является одной из его характеристик. </p>
<h3 id="3-2-Что-такое-USN"><a href="#3-2-Что-такое-USN" class="headerlink" title="3.2 Что такое USN"></a>3.2 Что такое USN</h3><p>Первоочередной задачей программы является чтение USN. </p>
<p>USN 是 Обновить журнал сервисных номеров или изменить<br>Аббревиатура Журнал, функция записи измененной информации в том NTFS, вы можете установить количество файлов и каталогов, которые будут отслеживаться в разделе, и записать время модификации и содержимое отслеживаемого объекта. </p>
<p>Когда журнал USN включен, для каждого тома NTFS, когда есть информация о добавлении, удалении и изменении файлов, NTFS использует журнал USN для записи и сохранения его как<br>Формат USN_RECORD. </p>
<h3 id="3-3-Почему-это-быстро"><a href="#3-3-Почему-это-быстро" class="headerlink" title="3.3 Почему это быстро"></a>3.3 Почему это быстро</h3><p>Журнал USN эквивалентен каталогу WORD и обеспечивает индекс. Конечно, когда содержимое статьи изменяется, журнал USN будет записывать, когда было внесено изменение, но он не записывает, что в нем изменено, поэтому индексный файл очень маленький. И когда вы хотите найти конкретный абзац статьи, вам не нужно дико крутить колесико мыши, просто посмотрите прямо на оглавление, и вам нужно только удерживать ctrl + щелчок мышью, чтобы найти. </p>
<p>Таким же образом, когда вы хотите найти определенный файл, вы можете напрямую узнать, существует ли файл, выполнив поиск в журнале USN (то есть в установленном индексе). </p>
<p>PS: Хотя Windows - это не «все является файлом» (Unix / Linux<br>Одна из основных философий), но папка также существует в виде файлов, поэтому вы также можете найти ее через USN. </p>
<h3 id="3-4-Окружающая-среда"><a href="#3-4-Окружающая-среда" class="headerlink" title="3.4 Окружающая среда"></a>3.4 Окружающая среда</h3><p>Поскольку формат NTFS изначально является патентом Microsoft, для нашего удобного доступа предоставляется ряд функций API. </p>
<p>Как старый, но классический Visual C ++ 6.0<br>Инструмент программирования, но в то время не было формата NTFS, поэтому я выбрал VC2005 в качестве интегрированной среды разработки, и он может работать только в системах Windows после 2000 года. </p>
<h2 id="4-Реализация-программы"><a href="#4-Реализация-программы" class="headerlink" title="4 Реализация программы"></a>4 Реализация программы</h2><h3 id="4-1-Чтение-USN"><a href="#4-1-Чтение-USN" class="headerlink" title="4.1 Чтение USN"></a>4.1 Чтение USN</h3><p>Ниже приведены все функции API, предоставляемые Microsoft ^ [4] ^, которые включены в файл заголовка <code>&lt;Winioctl.h&gt;</code>. </p>
<h4 id="4-1-1-Определить-формат-диска"><a href="#4-1-1-Определить-формат-диска" class="headerlink" title="4.1.1 Определить формат диска"></a>4.1.1 Определить формат диска</h4><p>Вызовите следующую функцию, чтобы узнать диск в формате NTFS </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GetVolumeInformation(</span><br><span class="line">	lpRootPathName: PChar;               <span class="comment">// 磁盘驱动器代码字符串</span></span><br><span class="line">	lpVolumeNameBuffer: PChar;           <span class="comment">// 磁盘驱动器卷标名称</span></span><br><span class="line">	nVolumeNameSize: DWORD;              <span class="comment">// 磁盘驱动器卷标名称长度</span></span><br><span class="line">	lpVolumeSerialNumber: PDWORD;        <span class="comment">// 磁盘驱动器卷标序列号</span></span><br><span class="line">	var lpMaximumComponentLength: DWORD; <span class="comment">// 系统允许的最大文件名长度</span></span><br><span class="line">    var lpFileSystemFlags: DWORD;        <span class="comment">// 文件系统标识</span></span><br><span class="line">	lpFileSystemNameBuffer: PChar;       <span class="comment">// 格式类型</span></span><br><span class="line">	nFileSystemNameSize: DWORD           <span class="comment">// 文件操作系统名称长度</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>LpFileSystemNameBuffer, который нам нужен, вернет «FAT32», «NTFS» и другие строки. </p>
<p>Затем используйте цикл для подсчета букв дисков A-Z в формате NTFS, а затем инициализируйте </p>
<h4 id="4-1-2-Получение-дескриптора-дисковода"><a href="#4-1-2-Получение-дескриптора-дисковода" class="headerlink" title="4.1.2 Получение дескриптора дисковода"></a>4.1.2 Получение дескриптора дисковода</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">HANDLE hVol = CreateFile(</span><br><span class="line">	<span class="string">&quot;盘符字符串&quot;</span>,  <span class="comment">// 必须如\.\C: (A-Z)的形式</span></span><br><span class="line">	GENERIC_READ | GENERIC_WRITE, <span class="comment">// 可以为</span></span><br><span class="line">	FILE_SHARE_READ | FILE_SHARE_WRITE, <span class="comment">// 必须包含有FILE_SHARE_WRITE</span></span><br><span class="line">	<span class="literal">NULL</span>, <span class="comment">// 这里不需要</span></span><br><span class="line">	OPEN_EXISTING, <span class="comment">// 必须包含OPEN_EXISTING, CREATE_ALWAYS可能会导致错误</span></span><br><span class="line">	FILE_ATTRIBUTE_READONLY, <span class="comment">// FILE_ATTRIBUTE_NORMAL可能会导致错误</span></span><br><span class="line">	<span class="literal">NULL</span>); <span class="comment">// 这里不需要</span></span><br></pre></td></tr></table></figure>

<p>На заметку: </p>
<ol>
<li>CreateFile возвращает дескриптор, который будет использоваться ниже; </li>
<li>Так как буква диска должна быть в форме <code>\\. \ C:</code>, обратная косая черта «//» в языке <code>C ++</code> означает «/»; </li>
<li>Требуются права администратора (vista, UAC появится в win7) </li>
</ol>
<p>Если <code>hVol! = INVALID_HANDLE_VALUE</code>, это означает, что дескриптор успешно получен и вы можете перейти к следующему шагу. </p>
<h4 id="4-1-3-Инициализировать-журнал-USN"><a href="#4-1-3-Инициализировать-журнал-USN" class="headerlink" title="4.1.3 Инициализировать журнал USN"></a>4.1.3 Инициализировать журнал USN</h4><p>Используйте FSCTL_CREATE_USN_JOURNAL в качестве управляющего кода DeviceIoControl. </p>
<p>Cujd - это указатель на входной буфер, указывающий на структуру CREATE_USN_JOURNAL_DATA. </p>
<h4 id="4-1-4-Получение-информации-журнала-USN"><a href="#4-1-4-Получение-информации-журнала-USN" class="headerlink" title="4.1.4 Получение информации журнала USN"></a>4.1.4 Получение информации журнала USN</h4><p>Используйте FSCTL_QUERY_USN_JOURNAL в качестве управляющего кода DeviceIoControl. </p>
<p>lpOutBuffer возвращает USN_JOURNAL_DATA, который является структурой </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    DWORDLONG UsnJournalID;</span><br><span class="line">    USN       FirstUsn;</span><br><span class="line">    USN       NextUsn;</span><br><span class="line">    USN       LowestValidUsn;</span><br><span class="line">    USN       MaxUsn;</span><br><span class="line">    DWORDLONG MaximumSize;</span><br><span class="line">    DWORDLONG AllocationDelta;</span><br><span class="line">&#125; USN_JOURNAL_DATA, *PUSN_JOURNAL_DATA;</span><br></pre></td></tr></table></figure>

<p>UsnJournalID, FirstUsn, NextUsn будут использоваться на следующем шаге. </p>
<h4 id="4-1-5-Получение-информации-о-файле-журнала-USN"><a href="#4-1-5-Получение-информации-о-файле-журнала-USN" class="headerlink" title="4.1.5 Получение информации о файле журнала USN"></a>4.1.5 Получение информации о файле журнала USN</h4><p>Поскольку USN хранится в форме USN_RECORD, его структура выглядит так: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">	DWORD RecordLength; <span class="comment">// 记录长度</span></span><br><span class="line">	WORD MajorVersion; <span class="comment">// 主版本</span></span><br><span class="line">	WORD MinorVersion; <span class="comment">// 次版本</span></span><br><span class="line">	DWORDLONG FileReferenceNumber; <span class="comment">// 文件引用数</span></span><br><span class="line">	DWORDLONG ParentFileReferenceNumber; <span class="comment">// 父目录引用数</span></span><br><span class="line">	USN Usn; <span class="comment">// USN</span></span><br><span class="line">	LARGE_INTEGER TimeStamp; <span class="comment">// 时间戳</span></span><br><span class="line">	DWORD Reason; <span class="comment">// 原因</span></span><br><span class="line">	DWORD SourceInfo; <span class="comment">// 源信息</span></span><br><span class="line">	DWORD SecurityId; <span class="comment">// 安全</span></span><br><span class="line">	ID DWORD FileAttributes; <span class="comment">// 文件属性</span></span><br><span class="line">	WORD FileNameLength; <span class="comment">// 文件长度</span></span><br><span class="line">	WORD FileNameOffset; <span class="comment">// 文件名偏移</span></span><br><span class="line">	DWORD ExtraInfo1;</span><br><span class="line">	DWORD ExtraInfo2; DWORD ExtraInfo3; <span class="comment">// Hypothetically added in version 2.3</span></span><br><span class="line">	WCHAR FileName[<span class="number">1</span>]; <span class="comment">// 文件名第一位的指针</span></span><br><span class="line">&#125; USN_RECORD, *PUSN_RECORD;</span><br></pre></td></tr></table></figure>

<p>Обратите внимание на <code>FileReferenceNumber</code>,<code>ParentFileReferenceNumber</code>, <code>FileNameLength</code>,<code>FileName</code> </p>
<p>Эти переменные очень важны </p>
<p><code>DeviceIoControl ()</code> взаимодействует с <code>FSCTL_ENUM_USN_DATA</code> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="number">0</span>!=DeviceIoControl(hVol,</span><br><span class="line">	 	FSCTL_ENUM_USN_DATA,</span><br><span class="line">	 	&amp;med,</span><br><span class="line">	 	<span class="keyword">sizeof</span> (med),</span><br><span class="line">	 	Buffer,</span><br><span class="line">	 	BUF_LEN,</span><br><span class="line">	 	&amp;usnDataSize,</span><br><span class="line">	 	<span class="literal">NULL</span>)) &#123;</span><br><span class="line"></span><br><span class="line">	 	DWORD dwRetBytes = usnDataSize - <span class="keyword">sizeof</span> (USN);</span><br><span class="line">	 	<span class="comment">// 找到第一个 USN 记录</span></span><br><span class="line">	 	UsnRecord = (PUSN_RECORD)(((PCHAR)Buffer)+<span class="keyword">sizeof</span> (USN));</span><br><span class="line"></span><br><span class="line">	 	<span class="keyword">while</span> (dwRetBytes&gt;<span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">	 		<span class="comment">// 获取到的信息</span></span><br><span class="line">	 		<span class="function">CString <span class="title">CfileName</span><span class="params">(UsnRecord-&gt;FileName, UsnRecord-&gt;FileNameLength/<span class="number">2</span>)</span></span>;</span><br><span class="line">	 		pfrnName.filename = nameCur.filename = CfileName;</span><br><span class="line">	 		pfrnName.pfrn = nameCur.pfrn = UsnRecord-&gt;ParentFileReferenceNumber;</span><br><span class="line"></span><br><span class="line">	 		<span class="comment">// Vector</span></span><br><span class="line">	 		VecNameCur.push_back(nameCur);</span><br><span class="line"></span><br><span class="line">	 		<span class="comment">// 构建hash...</span></span><br><span class="line">	 		frnPfrnNameMap[UsnRecord-&gt;FileReferenceNumber] = pfrnName;</span><br><span class="line">	 		<span class="comment">// 获取下一个记录</span></span><br><span class="line">	 		DWORD recordLen = UsnRecord-&gt;RecordLength;</span><br><span class="line">	 		dwRetBytes -= recordLen;</span><br><span class="line">	 		UsnRecord = (PUSN_RECORD)(((PCHAR)UsnRecord)+recordLen);</span><br><span class="line"></span><br><span class="line">	 	&#125;</span><br><span class="line">	 	<span class="comment">// 获取下一页数据</span></span><br><span class="line">	 	med.StartFileReferenceNumber = \*(USN \*)&amp;Buffer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Среди них «Мед»: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MFT_ENUM_DATA med;</span><br><span class="line"></span><br><span class="line">med.StartFileReferenceNumber = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">med.LowUsn = <span class="number">0</span>;<span class="comment">//UsnInfo.FirstUsn;</span></span><br></pre></td></tr></table></figure>

<p>После тестирования было обнаружено, что если использование «FirstUsn» иногда неверно, что приводит к неполным данным, лучше напрямую записать 0. </p>
<p><code>med.HighUsn = UsnInfo.NextUsn;</code> </p>
<p>В этом цикле имя файла, полученное каждый раз, вставляется в векторную и хеш-таблицу соответственно (описано ниже). </p>
<h4 id="4-1-6-Удалить-файл-журнала-USN"><a href="#4-1-6-Удалить-файл-журнала-USN" class="headerlink" title="4.1.6 Удалить файл журнала USN"></a>4.1.6 Удалить файл журнала USN</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DeviceIoControl(hVol,</span><br><span class="line">	FSCTL_DELETE_USN_JOURNAL,</span><br><span class="line">	&amp;dujd,</span><br><span class="line">	<span class="keyword">sizeof</span> (dujd),</span><br><span class="line">	<span class="literal">NULL</span>,</span><br><span class="line">	<span class="number">0</span>,</span><br><span class="line">	&amp;br,</span><br><span class="line">	<span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure>

<h4 id="4-1-7-Результаты-перебора-всех-файлов"><a href="#4-1-7-Результаты-перебора-всех-файлов" class="headerlink" title="4.1.7 Результаты перебора всех файлов"></a>4.1.7 Результаты перебора всех файлов</h4><p>Сохраните данные как Allfile.txt для анализа, как показано на рисунке 4-1. </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_01.jpg">图 4-1 Allfile.txt</a> </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_02.jpg">图 4-1 Allfile.txt</a> </p>
<p>Я использовал диск D на своем компьютере в качестве теста и перечислил все файлы. Как показано на рисунке, имеется около 40 Вт файлов, в общей сложности более 100 Вт данных, а размер файла составляет около 20 МБ. Это смутная оценка объема памяти, занятой последующими программами, который составляет около 50 МБ. Даже для 1 ГБ памяти это разумный диапазон. С исходными данными анализ выглядит следующим образом: </p>
<p>Например, файл Linux programming practice.isz, его системный путь: <code>D: \ Ghost \ Linux \ Linux programming practice.isz</code>, посмотрите результат в файле: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">D:\</span><br><span class="line">Frn: 5000000000005</span><br><span class="line">Pfrn: NULL</span><br><span class="line">……</span><br><span class="line">……</span><br><span class="line">Ghost</span><br><span class="line">Frn: 20000000000fd</span><br><span class="line">Pfrn: 5000000000005</span><br><span class="line">……</span><br><span class="line">……</span><br><span class="line">Linux</span><br><span class="line">Frn: e0000000010d2</span><br><span class="line">Pfrn: 20000000000fd</span><br><span class="line">……</span><br><span class="line">……</span><br><span class="line">Linux编程实践.isz</span><br><span class="line">Frn: 190000000003b2</span><br><span class="line">Pfrn: e0000000010d2</span><br><span class="line">可以得出：</span><br><span class="line">Linux编程实践.isz-&gt;Pfrn &#x3D;&#x3D; Linux-&gt;Frn</span><br><span class="line">Linux-&gt;Pfrn &#x3D;&#x3D; Ghost-&gt;Frn</span><br><span class="line">Ghost-&gt;Pfrn &#x3D;&#x3D; D:\ -&gt; Frn</span><br><span class="line">D:\ -&gt; Pfrn 停止</span><br></pre></td></tr></table></figure>

<p>Таким образом, используя рекурсивную функцию (прямо или косвенно вызывающую ее собственную функцию), вы можете получить полный путь. </p>
<h3 id="4-2-Сборка-данных-поиска"><a href="#4-2-Сборка-данных-поиска" class="headerlink" title="4.2 Сборка данных поиска"></a>4.2 Сборка данных поиска</h3><h4 id="4-2-1-Построение-вектора"><a href="#4-2-1-Построение-вектора" class="headerlink" title="4.2.1 Построение вектора"></a>4.2.1 Построение вектора</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">name_cur</span> &#123;</span></span><br><span class="line">    CString filename;</span><br><span class="line">    DWORDLONG pfrn;</span><br><span class="line">&#125;Name_Cur;</span><br></pre></td></tr></table></figure>

<p>Вектор: </p>
<p>Последовательный контейнер. Доступ к элементам вектора осуществляется через их индекс положения. Вы можете вызвать push_back или<br>Функция вставки добавляет элементы в вектор. В векторе<br>Добавление элементов в контейнер может вызвать перераспределение памяти для контейнера, а также может сделать недействительными все итераторы. в<br>вектор<br>Добавление (или удаление) элементов в середине контейнера сделает недействительными все итераторы, указывающие на элементы после точки вставки (или удаления). </p>
<p>Используйте Vector для хранения &lt;имя файла, текущий каталог&gt;. Из-за требований нечеткого поиска методы быстрого поиска, такие как двоичный поиск, здесь не применимы, а метод линейного обхода вектора от начала до конца соответствует этому требованию. . </p>
<h4 id="4-2-2-Создание-хеш-таблицы"><a href="#4-2-2-Создание-хеш-таблицы" class="headerlink" title="4.2.2 Создание хеш-таблицы"></a>4.2.2 Создание хеш-таблицы</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">pfrn_name</span> &#123;</span></span><br><span class="line">    DWORDLONG pfrn;</span><br><span class="line">    CString filename;</span><br><span class="line">&#125;Pfrn_Name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;DWORDLONG, Pfrn_Name&gt; Frn_Pfrn_Name_Map;</span><br></pre></td></tr></table></figure>

<p>Здесь мы используем функцию библиотеки карт ^ [5] ^, предоставляемую STL, карта - это набор пар ключ-значение. карта<br>Тип обычно понимается как ассоциативный массив (ассоциативный<br>array): вы можете использовать ключ в качестве индекса для получения значения, как и встроенный тип массива. Суть ассоциации состоит в том, что значение элемента связано с конкретным ключом, а не получено по положению элемента в массиве. </p>
<ol>
<li>Учитывая, что если вы реализуете хеш-функцию самостоятельно, может быть несколько ошибок, влияющих на ход выполнения, для ее реализации лучше использовать стабильную карту, предоставленную STL. </li>
<li>«Не изобретайте колесо». Не изобретайте велосипед ^ [6] ^ <ol>
<li>Например, Android от Google. Неужели Google не может самостоятельно разработать системное ядро, поэтому он использует очень зрелое ядро ​​Linux? Я думаю, что такой мировой гигант, как Google, не может обойтись без этой способности. Вместо этого он соблюдает принцип не изобретать велосипед заново. </li>
</ol>
</li>
</ol>
<h4 id="4-2-3-Вставить-данные"><a href="#4-2-3-Вставить-данные" class="headerlink" title="4.2.3 Вставить данные:"></a>4.2.3 Вставить данные:</h4><p>Это используется здесь в Разделе 4.1.5, Получить журнал USN.<br>В цикле информации о файле информация USN_RECORD, получаемая каждый раз, имя файла,<br>pfrn и frn вставляются в векторную и хеш-таблицу соответственно. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pfrnName.filename &#x3D; nameCur.filename &#x3D; CfileName;</span><br><span class="line">pfrnName.pfrn &#x3D; nameCur.pfrn &#x3D; UsnRecord-&gt;ParentFileReferenceNumber;</span><br><span class="line">VecNameCur.push_back(nameCur);</span><br><span class="line">frnPfrnNameMap[UsnRecord-&gt;FileReferenceNumber] &#x3D; pfrnName;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-Интерфейс"><a href="#4-3-Интерфейс" class="headerlink" title="4.3 Интерфейс"></a>4.3 Интерфейс</h3><p>При запуске проекта VC2005 предоставляет проекты командной строки (консоли) и проекты GUI. Программирование из командной строки очень удобно, быстро, практично и относительно просто. Если консоль соответствует требованиям, интерфейс не нужен. Или иногда целевая платформа не может отображать графический пользовательский интерфейс. но,<br>У графического интерфейса есть более очевидные преимущества, такие как система меню и лучшая интерактивность. Кроме того, в процессе выбора меню и перемещения данных между полями,<br>Мышь очень полезна, и графический интерфейс - лучший вариант. Поэтому при написании программы сначала экспериментировал с какими-то промежуточными данными под консолью, а затем, когда все закончилось, переключился на графический интерфейс. </p>
<p>MFC: классы Microsoft Foundation, также известные как MFC<br>, Является ли ответ Microsoft на “снижение уровня Windows<br>Наибольший вклад внесли «программный дизайн, скука, скука и трудности». MFC<br>Делает создание диалоговых окон чрезвычайно простым. Он также реализует систему доставки сообщений (message<br>отправка), устраняя простые ошибки WPARAM и LP ARAM. MFC<br>Это даже движущая сила, чтобы заманить некоторых людей в C ++.<br>Эта программа реализуется MFC, предоставленным Microsoft, как показано на рисунке 4-2: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_04.jpg">Рисунок 4-2 Интерфейс MFC</a> </p>
<h4 id="4-3-1-Принцип-KISS"><a href="#4-3-1-Принцип-KISS" class="headerlink" title="4.3.1 Принцип KISS"></a>4.3.1 Принцип KISS</h4><p>Принцип KISS: «Сохраните образец и<br>Аббревиатура от «Stupid», простота и удобство эксплуатации - важнейшие принципы дизайна. </p>
<p>Принцип KISS, пожалуй, самый уважаемый в дизайне, дизайне благоустройства дома, дизайне интерфейсов.<br>С точки зрения функционального дизайна сложные вещи становятся все более популярными, а простые вещи становятся все более и более узнаваемыми. Например, дизайн пользовательского интерфейса и наши китайские веб-страницы являются отрицательными примерами. “IKEA” (IKEA) простые и эффективные идеи домашнего дизайна и производства; “Microsoft” (Microsoft) “то, что видишь, то и получаешь”; концепция “Google” (Google), простой и прямой деловой стиль, без исключения Принцип «поцелуя». ^ [7] ^ </p>
<h4 id="4-3-2-Функция"><a href="#4-3-2-Функция" class="headerlink" title="4.3.2 Функция"></a>4.3.2 Функция</h4><p>Согласно принципу поцелуя, будьте максимально краткими. Добавить список кнопок Editbox<br>menu ^ [8] ^ Функции этих элементов управления следующие: </p>
<ul>
<li>Поле редактирования <ul>
<li>Получить строку, которую должен найти пользователь </li>
</ul>
</li>
<li>Кнопка <ol>
<li>Получить строку в EditBox </li>
<li>Символ слишком короткий для отображения подсказки. </li>
<li>Добавьте изображение лупы, функция понятна с первого взгляда </li>
</ol>
</li>
<li>Список <ol>
<li>Отобразите совпадающее имя файла и путь, дважды щелкните, чтобы открыть файл </li>
<li>Поскольку путь может быть относительно длинным, добавьте горизонтальную полосу прокрутки. </li>
<li>Дважды щелкните путь к результирующему файлу в списке, чтобы открыть файл, по которому дважды щелкнули мышью. </li>
</ol>
</li>
<li>Меню <ul>
<li>Меню, вы можете выбрать случай, порядок поиска </li>
</ul>
</li>
</ul>
<h3 id="4-4-Присоединиться-к-теме"><a href="#4-4-Присоединиться-к-теме" class="headerlink" title="4.4 Присоединиться к теме"></a>4.4 Присоединиться к теме</h3><h4 id="4-4-1-Зачем-присоединяться-к-темам"><a href="#4-4-1-Зачем-присоединяться-к-темам" class="headerlink" title="4.4.1 Зачем присоединяться к темам"></a>4.4.1 Зачем присоединяться к темам</h4><p>Преимущества ниток: нитки дешевы. Поток запускается быстрее, завершается быстрее и оказывает меньшее влияние на системные ресурсы. </p>
<p>Также учтите: </p>
<ol>
<li>Из-за ограничений io нет смысла использовать несколько потоков для одновременного чтения MFT на одном и том же жестком диске. </li>
<li>Доступ к MFT, находящемуся в разных разделах одного и того же жесткого диска, может повлиять на скорость. Для компьютеров с несколькими жесткими дисками следует значительно повысить эффективность. Однако пользователи нескольких жестких дисков могут сформировать массив RAID. Лучшим решением должно быть последовательное чтение дисков от A до Z. </li>
<li>При первом создании MFC он выполнялся последовательно. В результате интерфейс может отображаться только после завершения всей статистики данных. В этом процессе пользователи могут легко потерять терпение. </li>
<li>Наконец определите поток пользовательского интерфейса, фоновую статистику рабочего потока. </li>
</ol>
<h4 id="4-4-2-Запуск-рабочего-потока-в-MFC"><a href="#4-4-2-Запуск-рабочего-потока-в-MFC" class="headerlink" title="4.4.2 Запуск рабочего потока в MFC"></a>4.4.2 Запуск рабочего потока в MFC</h4><p>MFC давно добавила поддержку многопоточности. В типичном МФЦ<br>В программе за поддержкой многопоточности скрывается много потрясающей работы. MFC<br>Даже попытки усилить определенные концепции Win32, связанные с многопоточностью. </p>
<p>И графический интерфейс, и рабочие потоки запускаются с помощью AfxBeginThread (), но MFC использует перегрузочный характер функций C ++ для предоставления двух разных объявлений для этой функции. Компилятор автоматически выберет правильный для использования на основе предоставленных вами параметров. ^ [9] ^ </p>
<p>Используйте AfxBeginThread, чтобы запустить поток.<br>pParam Любое 4-байтовое значение, используемое для передачи новому потоку. Это может быть целое число, указатель или просто ноль. </p>
<p>Здесь используются только первые два параметра, функция потока в объекте и указатель объекта. </p>
<p>Вы можете увидеть два потока в диспетчере задач, как показано на рисунке 4-3. </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_03.jpg">Рисунок 4-3 Диспетчер задач отображает количество потоков</a> </p>
<p>Когда рабочий поток завершает свою задачу, он автоматически завершается и возвращается в поток. </p>
<h4 id="4-4-3-Свернуть-в-область-уведомлений"><a href="#4-4-3-Свернуть-в-область-уведомлений" class="headerlink" title="4.4.3 Свернуть в область уведомлений"></a>4.4.3 Свернуть в область уведомлений</h4><p>Теперь все больше и больше программ щелкают мышью в правом верхнем углу, который фактически свернут до значка в трее. Чтобы выйти из программы, вам нужно щелкнуть правой кнопкой мыши значок в трее, чтобы выйти. </p>
<p>Осуществляйте минимизацию, не выходя из программы, файлы можно найти удобно. </p>
<p>1) Сверните отображение на панели задач. </p>
<p>2) Нажмите «Закрыть», чтобы закрыть значок в трее, не отображая его на панели задач; дважды щелкните, чтобы ответить в окне отображения. </p>
<p>3) Добавить меню в иконку в трее. </p>
<h3 id="4-5-Найти"><a href="#4-5-Найти" class="headerlink" title="4.5 Найти"></a>4.5 Найти</h3><h4 id="4-5-1-Подстановочный-знак"><a href="#4-5-1-Подстановочный-знак" class="headerlink" title="4.5.1 Подстановочный знак"></a>4.5.1 Подстановочный знак</h4><p>В реальных приложениях невозможно четко запомнить имя файла, например test.2012-5-14.txt, что часто означает “test<br>.txt », поэтому требуется нечеткий поиск. Поскольку в консоли имя файла &lt;имя файла,<br>pfrn&gt; Создайте хеш-таблицу. Если вы хотите реализовать нечеткий поиск, хеш-таблица станет ненужной. Вы можете напрямую использовать вектор контейнера. </p>
<p>В соответствии с реальной ситуацией строгий подстановочный знак “\ *?” Не требуется.<br>Может решить большинство проблем поиска, плюс пользователи, как правило, могут не знать использования подстановочных знаков, не говоря уже о регулярных выражениях. Итак, начнем с “пробела”<br>Вместо “\ *?” Используйте Baidu.<br>Метод поиска Google с разделением ключевых слов пробелами - хорошее решение. \ * \ * \ * \ * </p>
<h4 id="4-5-2-Корпус-порядок"><a href="#4-5-2-Корпус-порядок" class="headerlink" title="4.5.2 Корпус, порядок"></a>4.5.2 Корпус, порядок</h4><p>Обычно бывают следующие две ситуации: </p>
<ol>
<li>Пользователь может не помнить регистр имени файла или пути </li>
<li>Иногда файлов слишком много, и для фильтрации нужных файлов может потребоваться строгое использование заглавных букв. </li>
<li>Не могу вспомнить порядок ключевых слов. </li>
</ol>
<p>Поэтому предоставьте следующие два варианта: </p>
<ol>
<li>Строгий случай </li>
<li>Нет заказа </li>
</ol>
<p>В общем случае значение по умолчанию: без учета регистра, последовательный поиск. </p>
<h4 id="4-5-3-Конфиденциальность-пользователя-и-системный-путь"><a href="#4-5-3-Конфиденциальность-пользователя-и-системный-путь" class="headerlink" title="4.5.3 Конфиденциальность пользователя и системный путь"></a>4.5.3 Конфиденциальность пользователя и системный путь</h4><ol>
<li>Учтите, что некоторые папки используются для хранения личных файлов пользователей. </li>
<li>Системные папки, такие как: <code>c: \ windows \ *</code>, которые не используются обычными пользователями. Тот же поиск только увеличит количество ненужных файлов и загрузит систему. </li>
</ol>
<p>Поэтому необходимо добавить параметр исключения папки, как показано на рисунке 4-4. </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_06.jpg">Рисунок 4-4 Интерфейс исключения папки</a> </p>
<p>Соответствующая функция: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isIgnore</span><span class="params">( <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;\* pignorelist )</span> </span>&#123;</span><br><span class="line">	<span class="built_in">string</span> tmp = CW2A(path);</span><br><span class="line">	<span class="keyword">for</span> ( <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::iterator it = pignorelist-&gt;begin();</span><br><span class="line">		it != pignorelist-&gt;end(); ++it ) &#123;</span><br><span class="line">			<span class="keyword">size_t</span> i = it-&gt;length();</span><br><span class="line">			<span class="keyword">if</span> ( !tmp.compare(<span class="number">0</span>, i, \*it,<span class="number">0</span>, i) ) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-5-4-Реализация"><a href="#4-5-4-Реализация" class="headerlink" title="4.5.4 Реализация"></a>4.5.4 Реализация</h4><p>Новый соответствующий строковый класс </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cmpStrStr</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	cmpStrStr(<span class="keyword">bool</span> uplow, <span class="keyword">bool</span> inorder) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;uplow = uplow;</span><br><span class="line">		<span class="keyword">this</span>-&gt;isOrder = inorder;</span><br><span class="line">	&#125;</span><br><span class="line">	~cmpStrStr() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">cmpStrFilename</span><span class="params">(CString str, CString filename)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">infilename</span><span class="params">(CString &amp;strtmp, CString &amp;filenametmp)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">bool</span> uplow;</span><br><span class="line">	<span class="keyword">bool</span> isOrder;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Пройдите через VecNameCur в ** 4.2.1 **, передайте функцию сопоставления cmpStrFilename и получите соответствующее имя файла </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="built_in">vector</span>&lt;Name_Cur&gt;::const_iterator cit = VecNameCur.begin();</span><br><span class="line">	cit != VecNameCur.end(); ++cit) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> ( cmpstrstr.cmpStrFilename(str, cit-&gt;filename) ) &#123;</span><br><span class="line">		path.Empty();</span><br><span class="line">		<span class="comment">// 还原 路径</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// vol:\  path \ cit-&gt;filename</span></span><br><span class="line">		getPath(cit-&gt;pfrn, path);</span><br><span class="line">		path += cit-&gt;filename;</span><br><span class="line">		<span class="comment">// path已是全路径</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ( isIgnore(pignorelist) ) &#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		rightFile.push_back(path);</span><br><span class="line">		<span class="comment">//path.Empty();</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmpStrFilename函数：</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> end = str.GetLength();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ( pos &lt; end ) &#123;</span><br><span class="line">	<span class="comment">// 对于str，取得 每个空格分开为的关键词</span></span><br><span class="line">	pos = str.Find( _T(<span class="string">&#x27; &#x27;</span>) );</span><br><span class="line"></span><br><span class="line">	CString strtmp;</span><br><span class="line">	<span class="keyword">if</span> ( pos == <span class="number">-1</span> ) &#123;</span><br><span class="line">		<span class="comment">// 无空格</span></span><br><span class="line">		strtmp = str;</span><br><span class="line">		pos = end;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		strtmp = str.Mid(<span class="number">0</span>, pos<span class="number">-0</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> ( !infilename(strtmp, filename) ) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	str.Delete(<span class="number">0</span>, pos);</span><br><span class="line">	str.TrimLeft(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Вы можете легко переписать алгоритм сопоставления строк в функции infilename для достижения некоторых расширений </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CString <span class="title">filenametmp</span><span class="params">(filename)</span></span>;</span><br><span class="line"><span class="keyword">int</span> pos;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( !uplow ) &#123;</span><br><span class="line">	<span class="comment">// 大小写敏感</span></span><br><span class="line">	filenametmp.MakeLower();</span><br><span class="line">	pos = filenametmp.Find(strtmp.MakeLower());</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	pos = filenametmp.Find(strtmp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( <span class="number">-1</span> == pos ) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( !isOrder ) &#123;</span><br><span class="line">	<span class="comment">// 无顺序</span></span><br><span class="line">	filename.Delete(<span class="number">0</span>, pos+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-5-5-Вывод-пути"><a href="#4-5-5-Вывод-пути" class="headerlink" title="4.5.5 Вывод пути"></a>4.5.5 Вывод пути</h4><p>После получения соответствующего имени файла следующим шагом является получение системного пути к файлу. Передайте полное имя соответствующего имени файла, полученное выше, в хэш-таблицу frnPfrnNameMap, созданную в ** 4.2.2 **, и получите путь рекурсивно. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CString <span class="title">Volume::getPath</span><span class="params">(DWORDLONG frn, CString &amp;path)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查找2</span></span><br><span class="line">	Frn_Pfrn_Name_Map::iterator it = frnPfrnNameMap.find(frn);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (it != frnPfrnNameMap.end()) &#123;</span><br><span class="line"></span><br><span class="line">		  <span class="keyword">if</span> ( <span class="number">0</span> != it-&gt;second.pfrn ) &#123;</span><br><span class="line">		 	  getPath(it-&gt;second.pfrn, path);</span><br><span class="line">		  &#125;</span><br><span class="line"></span><br><span class="line">		  path += it-&gt;second.filename;</span><br><span class="line">		  path += ( _T(<span class="string">&quot;\&quot;) );</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	return path;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-Анализ-сложности"><a href="#5-Анализ-сложности" class="headerlink" title="5 Анализ сложности"></a>5 Анализ сложности</h2><h3 id="5-1-Временная-сложность"><a href="#5-1-Временная-сложность" class="headerlink" title="5.1 Временная сложность"></a>5.1 Временная сложность</h3><p>Теоретически сложность времени составляет: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_05.jpg">Рисунок 5-1 Анализ сложности</a> </p>
<p>На процессоре AMD Athlon (tm) II X2 245 2,9 ГГц результат почти мгновенный. </p>
<h3 id="5-2-Сложность-пространства"><a href="#5-2-Сложность-пространства" class="headerlink" title="5.2 Сложность пространства"></a>5.2 Сложность пространства</h3><p>Из-за огромного количества компьютерных файлов - обычно от 10 до 100 Вт, использование памяти самой программой можно игнорировать. </p>
<p>234 708 файлов размером около 43 МБ. </p>
<p>Для сегодняшних систем с объемом памяти не менее 2 ГБ это не проблема. </p>
<h2 id="6-Возникшие-проблемы"><a href="#6-Возникшие-проблемы" class="headerlink" title="6 Возникшие проблемы"></a>6 Возникшие проблемы</h2><h3 id="6-1-Невозможно-инициализировать-файл-USN"><a href="#6-1-Невозможно-инициализировать-файл-USN" class="headerlink" title="6.1 Невозможно инициализировать файл USN"></a>6.1 Невозможно инициализировать файл USN</h3><p>Диск O на компьютере не может инициализировать файл журнала USN. В результате отладки было обнаружено, что: </p>
<p>DeviceIoControl возвращает 0, GetLastError 0x70 </p>
<p>Проверьте msdn, причина - ERROR_SHARING_PAUSED </p>
<p>Оказывается, я забыл инициализировать и добавить следующий код, программа может нормально получить доступ к диску O </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE_USN_JOURNAL_DATA cujd;</span><br><span class="line">cujd.MaximumSize = <span class="number">0</span>; <span class="comment">// 0表示使用默认值</span></span><br><span class="line">cujd.AllocationDelta = <span class="number">0</span>; <span class="comment">// 0表示使用默认值</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2-Проблема-wchar-и-char-в-юникоде"><a href="#6-2-Проблема-wchar-и-char-в-юникоде" class="headerlink" title="6.2 Проблема wchar и char в юникоде"></a>6.2 Проблема wchar и char в юникоде</h3><p>Изначально, с точки зрения обработки строк, в качестве метода обработки использовалась стандартная библиотечная функция string, но в юникоде<br>Ниже приведен двухбайтовый wchar, который столкнулся с множеством проблем при преобразовании строк. Наконец, CString используется как строка по умолчанию, а \ _T (“”) используется для инициализации строки. </p>
<h3 id="6-3-Проблема-положения-ifdef"><a href="#6-3-Проблема-положения-ifdef" class="headerlink" title="6.3 Проблема положения #ifdef"></a>6.3 Проблема положения #ifdef</h3><p>\ #ifdef, в нем нельзя установить точки останова, а потом я заметил, что перед include написано #define. </p>
<h3 id="6-4-Передача-параметров"><a href="#6-4-Передача-параметров" class="headerlink" title="6.4 Передача параметров"></a>6.4 Передача параметров</h3><p>Я начал проектировать с ориентированным на процесс мышлением, и у меня возникли проблемы с передачей того же дескриптора путем передачи параметров.Позже он изменился на метод класса, чтобы значительно улучшить. </p>
<h2 id="7-небольших-оптимизаций"><a href="#7-небольших-оптимизаций" class="headerlink" title="7 небольших оптимизаций"></a>7 небольших оптимизаций</h2><h3 id="7-1-Скорость-чтения"><a href="#7-1-Скорость-чтения" class="headerlink" title="7.1 Скорость чтения"></a>7.1 Скорость чтения</h3><p>При построении хэш-функции были придуманы три метода, и соответственно были проведены эксперименты, и функция времени использовалась для подсчета затраченного времени. Результаты следующие: </p>
<p>1) После изменения кода прочтите usn один раз, сохраните его во временном файле, прочтите и создайте хеш-таблицу </p>
<p>Каждый запуск, среднее время составляет около 27 с. </p>
<p>2) Используйте вектор для хранения данных в памяти после выпуска, </p>
<p>Результат положительный, а время увеличено почти в 10 раз! ! ! Как показано на Рисунке 7-1: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_06.jpg">7-1 Обойти все диски</a> </p>
<p>Это полностью в пределах допустимого диапазона. </p>
<p>Первый запуск был явно трудоемким, затем файл был предварительно прочитан из дискового кеша, и скорость резко возросла. Горячая точка анализа должна лежать во времени поиска на диске и чтении файла. </p>
<h3 id="7-2-Метод-открытия-файла"><a href="#7-2-Метод-открытия-файла" class="headerlink" title="7.2 Метод открытия файла"></a>7.2 Метод открытия файла</h3><p>В ** 4.3.2 ** дважды щелкните путь к файлу в ListBox, чтобы открыть файл ответа. Вначале использовалась системная функция system (), но появится черное окно консоли, а главное окно будет заблокировано и т. Д. Выполнение может быть продолжено только после закрытия файла, что очень вредно для взаимодействия с пользователем. Вместо этого вызовите функцию ShellExecute, чтобы открыть новый процесс, и главное окно может продолжить выполнение. </p>
<h3 id="7-3-Индикатор-выполнения"><a href="#7-3-Индикатор-выполнения" class="headerlink" title="7.3 Индикатор выполнения"></a>7.3 Индикатор выполнения</h3><p>После выпуска версии V1.0 не было подсказки, когда некоторые студенты сообщили о файле фоновой статистики, поэтому я не знаю, когда он будет завершен. Таким образом, индикатор выполнения добавлен в нижней части основного интерфейса для повышения интерактивности, как показано на рисунке.<br>7-2: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_07.jpg">Рис. 7-2 Индикатор выполнения</a> </p>
<p>Конечно, функция потока также внесла необходимые изменения: </p>
<h1 id="8-Заключение"><a href="#8-Заключение" class="headerlink" title="8 Заключение"></a>8 Заключение</h1><p>На этом основные функции программы завершены.Тесты на нескольких компьютерах и разных системах (XP и более поздние серии Windows) практически не имеют приостановленных анимаций и зависаний программы. </p>
<p>Из-за времени и по другим причинам многие функции еще не реализованы, например, интерфейс не может быть расширен, а данные файла не могут быть собраны динамически. </p>
<h1 id="Рекомендации"><a href="#Рекомендации" class="headerlink" title="Рекомендации"></a>Рекомендации</h1><p>[1] Технический документ об аппаратном обеспечении. Спецификация файловой системы NTFS [OL]. Библиотека Baidu, 2011: 30.<br>[2] Бейю, Исследование нескольких технологий файловой системы NTFS [ПР], 2007: 7.<br>[3] Младенцы. Интерактивная энциклопедия [OL]. Http://<a target="_blank" rel="noopener" href="http://www.hudong.com/wiki/ntfs">www.hudong.com/wiki/ntfs</a><br>[4] Microsoft. Библиотека MSDN [OL]. 2012:<br>[5] Стэнли Б. Липпман / Хосе ЛаДжуа / Барбара Э. Му. C \ + \ + Primer [M]. Эддисон-Уэсли Профессионал, 2006: 10,3<br>[6] Эрик С. Реймонд. Переводчики: Цзян Хун, Хэ Юань, Цай Сяоцзюнь. Искусство программирования UNIX [м]. Издательство электронной промышленности, 2006:<br>[7] Чэнь Хао. Некоторые принципы разработки программного обеспечения [OL]. Http://coolshell.cn/articles/4535.html<br>[8] Сунь Синь. Подробное описание языка VC ++ [м]. Электронная промышленность, 2006 г.<br>[9] Джим Беверидж / Роберт Винер. Многопоточные приложения в Win32: полное руководство по потокам<br>[10] Addison-Wesley Professional, 1996: 223-243. </p>
<h1 id="Резюме-на-английском-языке"><a href="#Резюме-на-английском-языке" class="headerlink" title="Резюме на английском языке"></a>Резюме на английском языке</h1><p>** Быстрое позиционирование файлов на диске NTFS ** </p>
<p>LE IH Австрия </p>
<p>(Школа информации и компьютеров, Аньхойский сельскохозяйственный университет, Хэфэй 230036) </p>
<p>** Аннотация ** ： В этой статье описывается NTFS-диск Windows,<br>перечисление всех названий файлов и папок на жестком диске,<br>и для построения хэш-таблицы с использованием C ++ STL, графического интерфейса MFC и рабочего потока.<br>В конечном итоге пользователь должен вводить ключевые слова, как простой поиск, такой как google<br>поиск по ключевым словам, а затем мгновенный возврат всех подходящих файлов / папок<br>и их системный путь. </p>
<p>** Ключевые слова: ** NTFS, быстрый, поиск, ключевые слова, путь к файлу </p>

    </div>

    
    
    
      
  <div class="popular-posts-header">Похожие записи</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/ru/Go-Web/" rel="bookmark">Перейти в Интернет</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/ru/Learn-Go-in-20-days/" rel="bookmark">Learn Go за 20 дней</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/ru/ios-developer-account-and-app-store/" rel="bookmark">Аккаунт разработчика iOS и как его разместить</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/ru/count-lines-of-code/" rel="bookmark">Количество строк кода</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/ru/A-simple-VS-between-Sinatra-and-Martini/" rel="bookmark">Простой VS. между Синатрой и Мартини</a></div>
    </li>
  </ul>


    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me 👨‍💻 a coffee ☕️</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    Донат
  </button>
  <div class="post-reward">
      <div>
        <img src="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/wechat.png" alt="LeiHao WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/alipay.png" alt="LeiHao Alipay">
        <span>Alipay</span>
      </div>
      <div>
        <img src="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/bitcoin.png" alt="LeiHao Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/ru/tags/programming/" rel="tag"># Programming</a>
              <a href="/ru/tags/everything/" rel="tag"># Everything</a>
              <a href="/ru/tags/ntfs/" rel="tag"># NTFS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
            </div>
            <div class="post-nav-item">
                <a href="/ru/Before-graduation/" rel="next" title="Более чем за десять дней до выпуска">
                  Более чем за десять дней до выпуска <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 2012 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-laptop-code"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LeiHao</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Общее кол-во символов">550k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Общее время чтения">8:20</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/ru/js/utils.js"></script><script src="/ru/js/next-boot.js"></script>

  




  <script src="/ru/js/local-search.js"></script>















  








  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://Artwalk.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://leihao0.github.io/ru/QSearch/";
    this.page.identifier = "QSearch/";
    this.page.title = "Принципиальная догадка и реализация всего";
    };
  NexT.utils.loadComments('#disqus_thread', () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://Artwalk.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
