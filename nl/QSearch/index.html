<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/nl/images/logo-192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/nl/images/logo-192.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/nl/images/logo.png">
  <link rel="mask-icon" href="/nl/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="rbaH_zC-qBwXaawJ10Mno3FHzv9HRFHGFdXx2f1BwyI">

<link rel="stylesheet" href="/nl/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.0/css/all.min.css">

<script data-ad-client="ca-pub-2317298287519457" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"leihao0.github.io","root":"/nl/","scheme":"Pisces","version":"8.0.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Zoeken...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/nl/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="onderzoek inhoud   Lees NTFS MFT  Constructie van de hashtabel  Systeempad van het bestand  GUI en werkthreads  Meerdere zoekmethoden  MFC-interface   onderzoeksplan   Begin april tot half april om de">
<meta property="og:type" content="article">
<meta property="og:title" content="Het principe en de realisatie van alles">
<meta property="og:url" content="https://leihao0.github.io/nl/QSearch/index.html">
<meta property="og:site_name" content="LeiHao&#39;s Blog">
<meta property="og:description" content="onderzoek inhoud   Lees NTFS MFT  Constructie van de hashtabel  Systeempad van het bestand  GUI en werkthreads  Meerdere zoekmethoden  MFC-interface   onderzoeksplan   Begin april tot half april om de">
<meta property="og:locale" content="nl_NL">
<meta property="article:published_time" content="2012-05-26T14:44:42.000Z">
<meta property="article:modified_time" content="2020-12-20T23:53:08.373Z">
<meta property="article:author" content="LeiHao">
<meta property="article:tag" content="Programming">
<meta property="article:tag" content="Everything">
<meta property="article:tag" content="NTFS">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://leihao0.github.io/nl/QSearch/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'nl'
  };
</script>

  <title>Het principe en de realisatie van alles | LeiHao's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159363268-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-159363268-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?25f016f633270b8e0baf56c4fe6f2dc1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/nl/atom.xml" title="LeiHao's Blog" type="application/atom+xml">
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/nl/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">LeiHao's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/nl/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/nl/about/" rel="section"><i class="fa fa-user fa-fw"></i>Over</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/nl/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archieven</a>

  </li>
        <li class="menu-item menu-item-rss">

    <a href="/nl/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Zoeken
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Zoeken..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Inhoudsopgave
        </li>
        <li class="sidebar-nav-overview">
          Overzicht
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Snelle-locatie-van-NTFS-schijfbestanden"><span class="nav-number">1.</span> <span class="nav-text">Snelle locatie van NTFS-schijfbestanden</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Inleiding"><span class="nav-number">1.1.</span> <span class="nav-text">1. Inleiding</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Korte-inleiding-tot-NTFS"><span class="nav-number">1.2.</span> <span class="nav-text">2 Korte inleiding tot NTFS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-NTFS"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 NTFS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-Huidige-situatie"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 Huidige situatie</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Voorbereiding"><span class="nav-number">1.3.</span> <span class="nav-text">3 Voorbereiding</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-Ontwerpideeen"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 Ontwerpideeën</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-Wat-is-USN"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2 Wat is USN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-Waarom-is-het-snel"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3 Waarom is het snel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-Omgeving"><span class="nav-number">1.3.4.</span> <span class="nav-text">3.4 Omgeving</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Uitvoering-van-het-programma"><span class="nav-number">1.4.</span> <span class="nav-text">4 Uitvoering van het programma</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-Lees-USN"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.1 Lees USN</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-Bepaal-het-schijfformaat"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">4.1.1 Bepaal het schijfformaat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2-Verkrijg-drive-disk-handle"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">4.1.2 Verkrijg drive disk handle</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-Initialiseer-USN-log"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">4.1.3 Initialiseer USN-log</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-4-USN-loginformatie-ophalen"><span class="nav-number">1.4.1.4.</span> <span class="nav-text">4.1.4 USN-loginformatie ophalen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-5-Informatie-over-USN-Journal-bestanden-verkrijgen"><span class="nav-number">1.4.1.5.</span> <span class="nav-text">4.1.5 Informatie over USN Journal-bestanden verkrijgen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-6-Verwijder-het-USN-logbestand"><span class="nav-number">1.4.1.6.</span> <span class="nav-text">4.1.6 Verwijder het USN-logbestand</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-7-Resultaten-van-het-inventariseren-van-alle-bestanden"><span class="nav-number">1.4.1.7.</span> <span class="nav-text">4.1.7 Resultaten van het inventariseren van alle bestanden</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-Bouw-zoekgegevens"><span class="nav-number">1.4.2.</span> <span class="nav-text">4.2 Bouw zoekgegevens</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1-Vector-construeren"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">4.2.1 Vector construeren</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-2-Een-hashtabel-bouwen"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">4.2.2 Een hashtabel bouwen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-3-Gegevens-invoegen"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">4.2.3 Gegevens invoegen:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-Interface"><span class="nav-number">1.4.3.</span> <span class="nav-text">4.3 Interface</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-1-KISS-principe"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">4.3.1 KISS-principe</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-2-Functie"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">4.3.2 Functie</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-Draad-samenvoegen"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.4 Draad samenvoegen</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-1-Waarom-lid-worden-van-threads"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">4.4.1 Waarom lid worden van threads</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-2-Start-een-Worker-thread-in-MFC"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">4.4.2 Start een Worker-thread in MFC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-3-Minimaliseren-naar-het-systeemvak"><span class="nav-number">1.4.4.3.</span> <span class="nav-text">4.4.3 Minimaliseren naar het systeemvak</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-Zoeken"><span class="nav-number">1.4.5.</span> <span class="nav-text">4.5 Zoeken</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-1-Jokerteken"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">4.5.1 Jokerteken</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-2-Geval-bestelling"><span class="nav-number">1.4.5.2.</span> <span class="nav-text">4.5.2 Geval, bestelling</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-3-Privacy-van-gebruikers-en-systeempad"><span class="nav-number">1.4.5.3.</span> <span class="nav-text">4.5.3 Privacy van gebruikers en systeempad</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-4-Implementatie"><span class="nav-number">1.4.5.4.</span> <span class="nav-text">4.5.4 Implementatie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-5-Paduitvoer"><span class="nav-number">1.4.5.5.</span> <span class="nav-text">4.5.5 Paduitvoer</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Complexiteitsanalyse"><span class="nav-number">1.5.</span> <span class="nav-text">5 Complexiteitsanalyse</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-Tijdscomplexiteit"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1 Tijdscomplexiteit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-Complexiteit-van-de-ruimte"><span class="nav-number">1.5.2.</span> <span class="nav-text">5.2 Complexiteit van de ruimte</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-ondervonden-problemen"><span class="nav-number">1.6.</span> <span class="nav-text">6 ondervonden problemen</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-Kan-USN-bestand-niet-initialiseren"><span class="nav-number">1.6.1.</span> <span class="nav-text">6.1 Kan USN-bestand niet initialiseren</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-Het-probleem-van-wchar-en-char-onder-unicode"><span class="nav-number">1.6.2.</span> <span class="nav-text">6.2 Het probleem van wchar en char onder unicode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-ifdef-positieprobleem"><span class="nav-number">1.6.3.</span> <span class="nav-text">6.3 #ifdef positieprobleem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-Parameteroverdracht"><span class="nav-number">1.6.4.</span> <span class="nav-text">6.4 Parameteroverdracht</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-kleine-optimalisaties"><span class="nav-number">1.7.</span> <span class="nav-text">7 kleine optimalisaties</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-Leessnelheid"><span class="nav-number">1.7.1.</span> <span class="nav-text">7.1 Leessnelheid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-Open-bestandsmethode"><span class="nav-number">1.7.2.</span> <span class="nav-text">7.2 Open bestandsmethode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-Voortgangsbalk"><span class="nav-number">1.7.3.</span> <span class="nav-text">7.3 Voortgangsbalk</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-Conclusie"><span class="nav-number">2.</span> <span class="nav-text">8 Conclusie</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#referenties"><span class="nav-number">3.</span> <span class="nav-text">referenties</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Engelse-samenvatting"><span class="nav-number">4.</span> <span class="nav-text">Engelse samenvatting</span></a></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LeiHao</p>
  <div class="site-description" itemprop="description">😃😃😃</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/nl/archives/">
        
          <span class="site-state-item-count">160</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/nl/tags/">
        <span class="site-state-item-count">81</span>
        <span class="site-state-item-name">labels</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/leihao0" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;leihao0" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/leihao0" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;leihao0" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/leihao0" title="Linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;leihao0" rel="noopener" target="_blank"><i class="fab fa-linkedin-in fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" class="cc-opacity" rel="noopener" target="_blank"><img src="/nl/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="nl">
    <link itemprop="mainEntityOfPage" href="https://leihao0.github.io/nl/QSearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/nl/images/avatar.gif">
      <meta itemprop="name" content="LeiHao">
      <meta itemprop="description" content="😃😃😃">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeiHao's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Het principe en de realisatie van alles
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Geplaatst op</span>

      <time title="Post aangemaakt: 2012-05-26 22:44:42" itemprop="dateCreated datePublished" datetime="2012-05-26T22:44:42+08:00">2012-05-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Post aangepast: 2020-12-21 07:53:08" itemprop="dateModified" datetime="2020-12-21T07:53:08+08:00">2020-12-21</time>
      </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/nl/QSearch/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="QSearch/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>26k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>24 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>onderzoek inhoud </p>
<ol>
<li>Lees NTFS MFT </li>
<li>Constructie van de hashtabel </li>
<li>Systeempad van het bestand </li>
<li>GUI en werkthreads </li>
<li>Meerdere zoekmethoden </li>
<li>MFC-interface </li>
</ol>
<p>onderzoeksplan </p>
<ul>
<li>Begin april tot half april om de onderzoeksrichting te bepalen </li>
<li>Van eind april tot eind april Voorbereiding voor elk kennispunt, eenvoudige toets </li>
<li>Begin mei, programma-ontwerp en -ontwikkeling, foutopsporing en werking </li>
<li>Half mei-eind mei Afstudeerontwerp scriptie schrijven </li>
</ul>
<p>Functies en innovatie </p>
<ol>
<li>CPU- en geheugengebruik zijn binnen een redelijk bereik </li>
<li>De software is stabiel en biedt verschillende zoekopties </li>
<li>Vergeleken met de zoekfunctie van Windows is de bestandslocatiesnelheid super snel </li>
</ol>
<h1 id="Snelle-locatie-van-NTFS-schijfbestanden"><a href="#Snelle-locatie-van-NTFS-schijfbestanden" class="headerlink" title="Snelle locatie van NTFS-schijfbestanden"></a>Snelle locatie van NTFS-schijfbestanden</h1><p><strong>Overzicht</strong> </p>
<blockquote>
<p>Dit artikel introduceert hoe de namen van alle bestanden en mappen op de harde schijf kunnen worden opgesomd onder de Windows NTFS-schijfindeling en de STL van C ++ kan worden gebruikt om een ​​hashtabel te maken, evenals de GUI en werkthreads van MFC, en uiteindelijk de implementatie te realiseren op basis van de trefwoorden die door de gebruiker zijn ingevoerd Zoek zo simpel als Google trefwoord zoeken, en retourneer dan onmiddellijk alle overeenkomende bestanden / mappen en ontvang recursief het systeempad van het bestand / de map. </p>
</blockquote>
<p>** Trefwoorden *<em>: *</em> NTFS, snel, trefwoord, zoeken, bestandspad ** </p>
<h2 id="1-Inleiding"><a href="#1-Inleiding" class="headerlink" title="1. Inleiding"></a>1. Inleiding</h2><p>De directorystructuur van Windows In NTFS-volumes zijn bestanden<br>Gerangschikt in de vorm van B + boom, druk op bij het zoeken naar bestanden in de directory<br>De zoekmethode B + zoekt eerst het hoofdknooppunt (beginnend bij de hoofddirectory) en vergelijkt vervolgens de bestandsnaam die moet worden gevonden met de bestandsnaam die overeenkomt met het onderliggende knooppunt in het hoofdknooppunt om te bepalen welk kindknooppunt overeenkomt met het opslaggebied dat moet worden doorzocht, en Gebruik het onderliggende knooppunt als het huidige hoofdknooppunt en zoek opnieuw totdat het bestand is gevonden. ^ [1] ^ </p>
<p>Hoewel de zoekfunctie van het Microsoft-systeem tekstinhoud kan doorzoeken, is de snelheid erg onbevredigend. In de meeste gevallen willen we gewoon weten in welke map op de computer het bestand is opgeslagen, en dit programma lost dit heel goed op. </p>
<h2 id="2-Korte-inleiding-tot-NTFS"><a href="#2-Korte-inleiding-tot-NTFS" class="headerlink" title="2 Korte inleiding tot NTFS"></a>2 Korte inleiding tot NTFS</h2><h3 id="2-1-NTFS"><a href="#2-1-NTFS" class="headerlink" title="2.1 NTFS"></a>2.1 NTFS</h3><p>NTFS (New Technology File System) 是 Windows<br>Het standaard bestandssysteem van NT en latere Windows. NTFS vervangt het FAT-bestandssysteem (File Allocation Table) en biedt een bestandssysteem voor de besturingssystemen uit de Windows-serie van Microsoft. NTFS heeft verschillende verbeteringen aangebracht in FAT en HPFS (High Performance File System). Het ondersteunt bijvoorbeeld metadata en gebruikt geavanceerde datastructuren om de prestaties, betrouwbaarheid en het gebruik van schijfruimte te verbeteren. ^ [2] ^ </p>
<h3 id="2-2-Huidige-situatie"><a href="#2-2-Huidige-situatie" class="headerlink" title="2.2 Huidige situatie"></a>2.2 Huidige situatie</h3><p>Met NT-gebaseerde Windows<br>Met de populariteit van 2000 / XP zijn veel individuele gebruikers begonnen NTFS te gebruiken. NTFS gebruikt clusters ook als een eenheid om gegevensbestanden op te slaan, maar de clustergrootte in NTFS is niet afhankelijk van de schijf- of partitiegrootte. Het verkleinen van de clustergrootte vermindert niet alleen de verspilling van schijfruimte, maar verkleint ook de kans op schijffragmentatie. NTFS ondersteunt de beheerfunctie voor bestandscodering, die gebruikers een hoger beveiligingsniveau kan bieden. ^ [3] ^ </p>
<h2 id="3-Voorbereiding"><a href="#3-Voorbereiding" class="headerlink" title="3 Voorbereiding"></a>3 Voorbereiding</h2><h3 id="3-1-Ontwerpideeen"><a href="#3-1-Ontwerpideeen" class="headerlink" title="3.1 Ontwerpideeën"></a>3.1 Ontwerpideeën</h3><p>Lees alle bestandsnamen van de schijf als gegevens en pas de gegevens aan volgens de trefwoorden die door de gebruiker zijn ingevoerd. Het juiste pad wordt samen met het pad naar de gebruiker teruggestuurd om het openen van het bestand te vergemakkelijken. </p>
<p>Het specifieke ontwerpidee wordt getoond in Figuur 3-1. </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_00.jpg">Figuur 3-1 Ontwerpideeën</a> </p>
<p>Het grootste voordeel van een hashtabel is dat het de tijd die nodig is voor gegevensopslag en zoeken aanzienlijk verkort, wat bijna als een constante tijd kan worden beschouwd; de kosten zijn alleen om meer geheugen te verbruiken. Met steeds meer beschikbaar geheugen is het echter de moeite waard om ruimte in te ruilen voor tijd. Bovendien is het gemak van codering ook een van de kenmerken. </p>
<h3 id="3-2-Wat-is-USN"><a href="#3-2-Wat-is-USN" class="headerlink" title="3.2 Wat is USN"></a>3.2 Wat is USN</h3><p>De hoogste prioriteit van het programma is het lezen van het USN. </p>
<p>USN 是 Servicenummerjournaal bijwerken of wijzigen<br>De afkorting van Journal, de functie van het opnemen van de gewijzigde informatie in het NTFS-volume, u kunt het aantal bestanden en mappen instellen dat in de partitie moet worden bewaakt, en de wijzigingstijd en inhoud van het bewaakte object opnemen. </p>
<p>Wanneer het USN-logboek is ingeschakeld, gebruikt NTFS voor elk NTFS-volume, wanneer er informatie is over het toevoegen, verwijderen en wijzigen van bestanden, het USN-logboek om het op te nemen en op te slaan als<br>Het formaat van USN_RECORD. </p>
<h3 id="3-3-Waarom-is-het-snel"><a href="#3-3-Waarom-is-het-snel" class="headerlink" title="3.3 Waarom is het snel"></a>3.3 Waarom is het snel</h3><p>Het USN-logboek is gelijk aan de WORD-directory en biedt een index. Natuurlijk, wanneer de inhoud van het artikel verandert, zal het USN-logboek opnemen wanneer de wijziging is aangebracht, maar het registreert niet wat erin is gewijzigd, dus het indexbestand is erg klein. En als u de specifieke alinea van het artikel wilt vinden, hoeft u het muiswiel niet wild te draaien, kijkt u gewoon rechtstreeks naar de inhoudsopgave en hoeft u alleen ctrl + muisklik ingedrukt te houden om te zoeken. </p>
<p>Op dezelfde manier kunt u, wanneer u een bepaald bestand wilt vinden, direct nagaan of het bestand bestaat door in het USN-logboek te zoeken (dat wil zeggen, de vastgestelde index). </p>
<p>PS: Hoewel Windows niet “alles is een bestand” is (Unix / Linux<br>Een van de basisfilosofie van), maar mappen bestaan ​​ook in de vorm van bestanden, dus je kunt de locatie ook vinden via USN. </p>
<h3 id="3-4-Omgeving"><a href="#3-4-Omgeving" class="headerlink" title="3.4 Omgeving"></a>3.4 Omgeving</h3><p>Aangezien het NTFS-formaat oorspronkelijk een patent van Microsoft is, is er een reeks API-functies beschikbaar voor onze gemakkelijke toegang. </p>
<p>Als een oude maar klassieke Visual C ++ 6.0<br>Programmeertool, maar er was op dat moment geen NTFS-formaat, dus werd VC2005 gekozen als de geïntegreerde ontwikkelomgeving, en het kan pas na 2000 op Windows-systemen draaien. </p>
<h2 id="4-Uitvoering-van-het-programma"><a href="#4-Uitvoering-van-het-programma" class="headerlink" title="4 Uitvoering van het programma"></a>4 Uitvoering van het programma</h2><h3 id="4-1-Lees-USN"><a href="#4-1-Lees-USN" class="headerlink" title="4.1 Lees USN"></a>4.1 Lees USN</h3><p>Hieronder volgen alle API-functies die worden geleverd door Microsoft ^ [4] ^, die zijn opgenomen in het <code>&lt;Winioctl.h&gt;</code> header-bestand. </p>
<h4 id="4-1-1-Bepaal-het-schijfformaat"><a href="#4-1-1-Bepaal-het-schijfformaat" class="headerlink" title="4.1.1 Bepaal het schijfformaat"></a>4.1.1 Bepaal het schijfformaat</h4><p>Roep de volgende functie aan om de schijf in NTFS-indeling te achterhalen </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GetVolumeInformation(</span><br><span class="line">	lpRootPathName: PChar;               <span class="comment">// 磁盘驱动器代码字符串</span></span><br><span class="line">	lpVolumeNameBuffer: PChar;           <span class="comment">// 磁盘驱动器卷标名称</span></span><br><span class="line">	nVolumeNameSize: DWORD;              <span class="comment">// 磁盘驱动器卷标名称长度</span></span><br><span class="line">	lpVolumeSerialNumber: PDWORD;        <span class="comment">// 磁盘驱动器卷标序列号</span></span><br><span class="line">	var lpMaximumComponentLength: DWORD; <span class="comment">// 系统允许的最大文件名长度</span></span><br><span class="line">    var lpFileSystemFlags: DWORD;        <span class="comment">// 文件系统标识</span></span><br><span class="line">	lpFileSystemNameBuffer: PChar;       <span class="comment">// 格式类型</span></span><br><span class="line">	nFileSystemNameSize: DWORD           <span class="comment">// 文件操作系统名称长度</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>De lpFileSystemNameBuffer, wat we willen, zal “FAT32”, “NTFS” en andere strings teruggeven. </p>
<p>Gebruik vervolgens een lus om A-Z-stationsletters in NTFS-indeling te tellen en initialiseer vervolgens </p>
<h4 id="4-1-2-Verkrijg-drive-disk-handle"><a href="#4-1-2-Verkrijg-drive-disk-handle" class="headerlink" title="4.1.2 Verkrijg drive disk handle"></a>4.1.2 Verkrijg drive disk handle</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">HANDLE hVol = CreateFile(</span><br><span class="line">	<span class="string">&quot;盘符字符串&quot;</span>,  <span class="comment">// 必须如\.\C: (A-Z)的形式</span></span><br><span class="line">	GENERIC_READ | GENERIC_WRITE, <span class="comment">// 可以为</span></span><br><span class="line">	FILE_SHARE_READ | FILE_SHARE_WRITE, <span class="comment">// 必须包含有FILE_SHARE_WRITE</span></span><br><span class="line">	<span class="literal">NULL</span>, <span class="comment">// 这里不需要</span></span><br><span class="line">	OPEN_EXISTING, <span class="comment">// 必须包含OPEN_EXISTING, CREATE_ALWAYS可能会导致错误</span></span><br><span class="line">	FILE_ATTRIBUTE_READONLY, <span class="comment">// FILE_ATTRIBUTE_NORMAL可能会导致错误</span></span><br><span class="line">	<span class="literal">NULL</span>); <span class="comment">// 这里不需要</span></span><br></pre></td></tr></table></figure>

<p>Aandachtspunten: </p>
<ol>
<li>CreateFile retourneert een handle, die hieronder zal worden gebruikt; </li>
<li>Aangezien de stationsletter de vorm “\. \ C:” moet hebben, vertegenwoordigt de backslash “//“ in de taal “C ++” “/“; </li>
<li>Beheerdersrechten zijn vereist (vista, UAC verschijnt in win7) </li>
</ol>
<p>Als <code>hVol! = INVALID_HANDLE_VALUE</code>, betekent dit dat de handle met succes is verkregen en dat u door kunt gaan naar de volgende stap. </p>
<h4 id="4-1-3-Initialiseer-USN-log"><a href="#4-1-3-Initialiseer-USN-log" class="headerlink" title="4.1.3 Initialiseer USN-log"></a>4.1.3 Initialiseer USN-log</h4><p>Gebruik <code>FSCTL_CREATE_USN_JOURNAL</code> als de controlecode van<code>DeviceIoControl</code>. </p>
<p><code>Cujd</code> is een pointer naar de invoerbuffer, wijzend naar de<code>CREATE_USN_JOURNAL_DATA</code> structuur. </p>
<h4 id="4-1-4-USN-loginformatie-ophalen"><a href="#4-1-4-USN-loginformatie-ophalen" class="headerlink" title="4.1.4 USN-loginformatie ophalen"></a>4.1.4 USN-loginformatie ophalen</h4><p>Gebruik <code>FSCTL_QUERY_USN_JOURNAL</code> als de controlecode van<code>DeviceIoControl</code>. </p>
<p><code>lpOutBuffer</code> retourneert een<code>USN_JOURNAL_DATA</code>, wat een structuur is </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    DWORDLONG UsnJournalID;</span><br><span class="line">    USN       FirstUsn;</span><br><span class="line">    USN       NextUsn;</span><br><span class="line">    USN       LowestValidUsn;</span><br><span class="line">    USN       MaxUsn;</span><br><span class="line">    DWORDLONG MaximumSize;</span><br><span class="line">    DWORDLONG AllocationDelta;</span><br><span class="line">&#125; USN_JOURNAL_DATA, *PUSN_JOURNAL_DATA;</span><br></pre></td></tr></table></figure>

<p><code>UsnJournalID</code>,<code>FirstUsn</code>, <code>NextUsn</code> zullen in de volgende stap worden gebruikt </p>
<h4 id="4-1-5-Informatie-over-USN-Journal-bestanden-verkrijgen"><a href="#4-1-5-Informatie-over-USN-Journal-bestanden-verkrijgen" class="headerlink" title="4.1.5 Informatie over USN Journal-bestanden verkrijgen"></a>4.1.5 Informatie over USN Journal-bestanden verkrijgen</h4><p>Omdat <code>USN</code> wordt opgeslagen in de vorm van<code>USN_RECORD</code>, is de structuur: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">	DWORD RecordLength; <span class="comment">// 记录长度</span></span><br><span class="line">	WORD MajorVersion; <span class="comment">// 主版本</span></span><br><span class="line">	WORD MinorVersion; <span class="comment">// 次版本</span></span><br><span class="line">	DWORDLONG FileReferenceNumber; <span class="comment">// 文件引用数</span></span><br><span class="line">	DWORDLONG ParentFileReferenceNumber; <span class="comment">// 父目录引用数</span></span><br><span class="line">	USN Usn; <span class="comment">// USN</span></span><br><span class="line">	LARGE_INTEGER TimeStamp; <span class="comment">// 时间戳</span></span><br><span class="line">	DWORD Reason; <span class="comment">// 原因</span></span><br><span class="line">	DWORD SourceInfo; <span class="comment">// 源信息</span></span><br><span class="line">	DWORD SecurityId; <span class="comment">// 安全</span></span><br><span class="line">	ID DWORD FileAttributes; <span class="comment">// 文件属性</span></span><br><span class="line">	WORD FileNameLength; <span class="comment">// 文件长度</span></span><br><span class="line">	WORD FileNameOffset; <span class="comment">// 文件名偏移</span></span><br><span class="line">	DWORD ExtraInfo1;</span><br><span class="line">	DWORD ExtraInfo2; DWORD ExtraInfo3; <span class="comment">// Hypothetically added in version 2.3</span></span><br><span class="line">	WCHAR FileName[<span class="number">1</span>]; <span class="comment">// 文件名第一位的指针</span></span><br><span class="line">&#125; USN_RECORD, *PUSN_RECORD;</span><br></pre></td></tr></table></figure>

<p>Let op de <code>FileReferenceNumber</code>,<code>ParentFileReferenceNumber</code>, <code>FileNameLength</code>,<code>FileName</code> </p>
<p>Deze variabelen zijn erg belangrijk </p>
<p><code>DeviceIoControl ()</code> werkt samen met <code>FSCTL_ENUM_USN_DATA</code> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="number">0</span>!=DeviceIoControl(hVol,</span><br><span class="line">	 	FSCTL_ENUM_USN_DATA,</span><br><span class="line">	 	&amp;med,</span><br><span class="line">	 	<span class="keyword">sizeof</span> (med),</span><br><span class="line">	 	Buffer,</span><br><span class="line">	 	BUF_LEN,</span><br><span class="line">	 	&amp;usnDataSize,</span><br><span class="line">	 	<span class="literal">NULL</span>)) &#123;</span><br><span class="line"></span><br><span class="line">	 	DWORD dwRetBytes = usnDataSize - <span class="keyword">sizeof</span> (USN);</span><br><span class="line">	 	<span class="comment">// 找到第一个 USN 记录</span></span><br><span class="line">	 	UsnRecord = (PUSN_RECORD)(((PCHAR)Buffer)+<span class="keyword">sizeof</span> (USN));</span><br><span class="line"></span><br><span class="line">	 	<span class="keyword">while</span> (dwRetBytes&gt;<span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">	 		<span class="comment">// 获取到的信息</span></span><br><span class="line">	 		<span class="function">CString <span class="title">CfileName</span><span class="params">(UsnRecord-&gt;FileName, UsnRecord-&gt;FileNameLength/<span class="number">2</span>)</span></span>;</span><br><span class="line">	 		pfrnName.filename = nameCur.filename = CfileName;</span><br><span class="line">	 		pfrnName.pfrn = nameCur.pfrn = UsnRecord-&gt;ParentFileReferenceNumber;</span><br><span class="line"></span><br><span class="line">	 		<span class="comment">// Vector</span></span><br><span class="line">	 		VecNameCur.push_back(nameCur);</span><br><span class="line"></span><br><span class="line">	 		<span class="comment">// 构建hash...</span></span><br><span class="line">	 		frnPfrnNameMap[UsnRecord-&gt;FileReferenceNumber] = pfrnName;</span><br><span class="line">	 		<span class="comment">// 获取下一个记录</span></span><br><span class="line">	 		DWORD recordLen = UsnRecord-&gt;RecordLength;</span><br><span class="line">	 		dwRetBytes -= recordLen;</span><br><span class="line">	 		UsnRecord = (PUSN_RECORD)(((PCHAR)UsnRecord)+recordLen);</span><br><span class="line"></span><br><span class="line">	 	&#125;</span><br><span class="line">	 	<span class="comment">// 获取下一页数据</span></span><br><span class="line">	 	med.StartFileReferenceNumber = \*(USN \*)&amp;Buffer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Onder hen is <code>Med</code>: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MFT_ENUM_DATA med;</span><br><span class="line"></span><br><span class="line">med.StartFileReferenceNumber = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">med.LowUsn = <span class="number">0</span>;<span class="comment">//UsnInfo.FirstUsn;</span></span><br></pre></td></tr></table></figure>

<p>Na het testen hier, is gebleken dat als het gebruik van <code>FirstUsn</code> soms onjuist is, waardoor onvolledige gegevens worden verkregen, het beter is om 0 rechtstreeks te schrijven. </p>
<p><code>med.HighUsn = UsnInfo.NextUsn;</code> </p>
<p>In deze lus wordt de verkregen bestandsnaam telkens in de vector- en hashtabel ingevoegd (hieronder beschreven). </p>
<h4 id="4-1-6-Verwijder-het-USN-logbestand"><a href="#4-1-6-Verwijder-het-USN-logbestand" class="headerlink" title="4.1.6 Verwijder het USN-logbestand"></a>4.1.6 Verwijder het USN-logbestand</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DeviceIoControl(hVol,</span><br><span class="line">	FSCTL_DELETE_USN_JOURNAL,</span><br><span class="line">	&amp;dujd,</span><br><span class="line">	<span class="keyword">sizeof</span> (dujd),</span><br><span class="line">	<span class="literal">NULL</span>,</span><br><span class="line">	<span class="number">0</span>,</span><br><span class="line">	&amp;br,</span><br><span class="line">	<span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure>

<h4 id="4-1-7-Resultaten-van-het-inventariseren-van-alle-bestanden"><a href="#4-1-7-Resultaten-van-het-inventariseren-van-alle-bestanden" class="headerlink" title="4.1.7 Resultaten van het inventariseren van alle bestanden"></a>4.1.7 Resultaten van het inventariseren van alle bestanden</h4><p>Sla de gegevens op als Allfile.txt voor analyse, zoals weergegeven in afbeelding 4-1. </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_01.jpg">图 4-1 Allfile.txt</a> </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_02.jpg">图 4-1 Allfile.txt</a> </p>
<p>Ik heb schijf D op mijn computer als test gebruikt en alle bestanden opgesomd. Zoals in de afbeelding te zien is, zijn er ongeveer 40 W-bestanden, in totaal meer dan 100 W-gegevens, en de bestandsgrootte is ongeveer 20 MB. Dit geeft een vage schatting van de hoeveelheid geheugen die wordt ingenomen door volgende programma’s, namelijk ongeveer 50M. Zelfs voor slechts 1G geheugen is het binnen een redelijk bereik. Met de originele gegevens is de analyse als volgt: </p>
<p>Bijvoorbeeld het Linux-programmeer practice.isz-bestand, het systeempad is: <code>D: \ Ghost \ Linux \ Linux programmeerpraktijk.isz</code>, kijk naar het resultaat in het bestand: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">D:\</span><br><span class="line">Frn: 5000000000005</span><br><span class="line">Pfrn: NULL</span><br><span class="line">……</span><br><span class="line">……</span><br><span class="line">Ghost</span><br><span class="line">Frn: 20000000000fd</span><br><span class="line">Pfrn: 5000000000005</span><br><span class="line">……</span><br><span class="line">……</span><br><span class="line">Linux</span><br><span class="line">Frn: e0000000010d2</span><br><span class="line">Pfrn: 20000000000fd</span><br><span class="line">……</span><br><span class="line">……</span><br><span class="line">Linux编程实践.isz</span><br><span class="line">Frn: 190000000003b2</span><br><span class="line">Pfrn: e0000000010d2</span><br><span class="line">可以得出：</span><br><span class="line">Linux编程实践.isz-&gt;Pfrn &#x3D;&#x3D; Linux-&gt;Frn</span><br><span class="line">Linux-&gt;Pfrn &#x3D;&#x3D; Ghost-&gt;Frn</span><br><span class="line">Ghost-&gt;Pfrn &#x3D;&#x3D; D:\ -&gt; Frn</span><br><span class="line">D:\ -&gt; Pfrn 停止</span><br></pre></td></tr></table></figure>

<p>Dus met een recursieve functie (die direct of indirect zijn eigen functie aanroept), kun je het volledige pad krijgen. </p>
<h3 id="4-2-Bouw-zoekgegevens"><a href="#4-2-Bouw-zoekgegevens" class="headerlink" title="4.2 Bouw zoekgegevens"></a>4.2 Bouw zoekgegevens</h3><h4 id="4-2-1-Vector-construeren"><a href="#4-2-1-Vector-construeren" class="headerlink" title="4.2.1 Vector construeren"></a>4.2.1 Vector construeren</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">name_cur</span> &#123;</span></span><br><span class="line">    CString filename;</span><br><span class="line">    DWORDLONG pfrn;</span><br><span class="line">&#125;Name_Cur;</span><br></pre></td></tr></table></figure>

<p>Vector: </p>
<p>Een opeenvolgende container. De elementen in de vector zijn toegankelijk via hun positie-index. U kunt push_back of<br>De insert-functie voegt elementen toe aan de vector. In vector<br>Het toevoegen van elementen aan de container kan ertoe leiden dat er opnieuw geheugenruimte voor de container wordt toegewezen, en kan ook alle iterators ongeldig maken. in<br>vector<br>Door elementen in het midden van de container toe te voegen (of te verwijderen), worden alle iterators die naar elementen wijzen na het invoeg- (of verwijderings) punt ongeldig. </p>
<p>Gebruik Vector om &lt;bestandsnaam, huidige directory&gt; op te slaan. Vanwege de vereisten van fuzzy zoeken, zijn snelle zoekmethoden zoals binair zoeken hier niet van toepassing, en de lineaire doorloopmethode van Vector van begin tot einde voldoet aan deze vereiste. . </p>
<h4 id="4-2-2-Een-hashtabel-bouwen"><a href="#4-2-2-Een-hashtabel-bouwen" class="headerlink" title="4.2.2 Een hashtabel bouwen"></a>4.2.2 Een hashtabel bouwen</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">pfrn_name</span> &#123;</span></span><br><span class="line">    DWORDLONG pfrn;</span><br><span class="line">    CString filename;</span><br><span class="line">&#125;Pfrn_Name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;DWORDLONG, Pfrn_Name&gt; Frn_Pfrn_Name_Map;</span><br></pre></td></tr></table></figure>

<p>Hier gebruiken we de kaartbibliotheekfunctie ^ [5] ^ geleverd door STL, map is een verzameling sleutel-waardeparen. kaart<br>Het type kan meestal worden opgevat als een associatieve array (associatief<br>array): je kunt de sleutel gebruiken als een subscript om een ​​waarde te krijgen, net als het ingebouwde array-type. De essentie van associatie is dat de waarde van het element wordt geassocieerd met een specifieke sleutel, in plaats van verkregen door de positie van het element in de array. </p>
<ol>
<li>Aangezien als u de hash-functie zelf implementeert, er verschillende bugs kunnen zijn die de voortgang beïnvloeden, is het beter om de stabiele kaart van STL te gebruiken om deze te implementeren. </li>
<li>“Vind het wiel niet opnieuw uit” Vind het wiel niet opnieuw uit ^ [6] ^ <ol>
<li>Is Google’s Android bijvoorbeeld niet in staat om alleen een systeemkernel te ontwikkelen, zodat het een zeer volwassen Linux-kernel gebruikt? Ik denk dat het voor een wereldgigant als Google onmogelijk is om zonder deze mogelijkheid te zijn. In plaats daarvan respecteert het het principe om het wiel niet opnieuw uit te vinden. </li>
</ol>
</li>
</ol>
<h4 id="4-2-3-Gegevens-invoegen"><a href="#4-2-3-Gegevens-invoegen" class="headerlink" title="4.2.3 Gegevens invoegen:"></a>4.2.3 Gegevens invoegen:</h4><p>Dit wordt hier gebruikt in Paragraaf 4.1.5, USN Journal downloaden<br>In de lus van bestandsinformatie, de <code>USN_RECORD</code> informatie die elke keer wordt verkregen, de<code>bestandsnaam</code>,<br><code>pfrn</code>,<code>frn</code> worden respectievelijk in de vector- en hashtabel ingevoegd. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pfrnName.filename &#x3D; nameCur.filename &#x3D; CfileName;</span><br><span class="line">pfrnName.pfrn &#x3D; nameCur.pfrn &#x3D; UsnRecord-&gt;ParentFileReferenceNumber;</span><br><span class="line">VecNameCur.push_back(nameCur);</span><br><span class="line">frnPfrnNameMap[UsnRecord-&gt;FileReferenceNumber] &#x3D; pfrnName;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-Interface"><a href="#4-3-Interface" class="headerlink" title="4.3 Interface"></a>4.3 Interface</h3><p>Bij het starten van een project biedt VC2005 opdrachtregel (console) projecten en GUI-projecten. Programmeren via de opdrachtregel is erg handig, snel, praktisch en relatief eenvoudig. Als de console aan de eisen kan voldoen, is de interface niet nodig. Of soms kan het doelplatform de grafische gebruikersinterface niet weergeven. maar,<br>GUI heeft meer voor de hand liggende voordelen, zoals een menusysteem en betere interactiviteit. Bovendien, tijdens het selecteren van menu’s en het verplaatsen van gegevens tussen velden,<br>De muis is erg handig en GUI is de juiste keuze. Daarom, bij het schrijven van het programma, eerst geëxperimenteerd met wat tussenliggende gegevens onder de console, en daarna overgeschakeld naar de GUI-interface toen het voorbij was. </p>
<p>MFC: Microsoft Foundation Classes, ook wel bekend als MFC<br>, Is Microsoft’s<br>De grootste bijdrage van “programma-ontwerp, verveling, verveling en moeilijkheid”. MFC<br>Maakt het genereren van dialoogvensters uiterst eenvoudig. Het implementeert ook een systeem voor het afleveren van berichten (message<br>dispatching), omgaan met de gemakkelijke fouten van WPARAM en LP ARAM. MFC<br>Het is zelfs de drijvende kracht om sommige mensen naar C ++ te lokken.<br>Dit programma wordt geïmplementeerd door MFC geleverd door Microsoft, zoals weergegeven in afbeelding 4-2: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_04.jpg">Figuur 4-2 MFC-interface</a> </p>
<h4 id="4-3-1-KISS-principe"><a href="#4-3-1-KISS-principe" class="headerlink" title="4.3.1 KISS-principe"></a>4.3.1 KISS-principe</h4><p>Het KISS-principe is “Keep It Sample And<br>De afkorting van “Stupid”, eenvoud en bedieningsgemak zijn de belangrijkste principes van design. </p>
<p>Het KISS-principe is waarschijnlijk het meest gerespecteerd in ontwerp, ontwerp voor woningverbetering en interface-ontwerp<br>In termen van operationeel ontwerp worden complexe dingen steeds populairder, terwijl eenvoudige dingen steeds meer worden herkend. Deze UI-ontwerpen en onze Chinese webpagina’s zijn bijvoorbeeld negatieve voorbeelden. “IKEA” (IKEA) eenvoudig en efficiënt huisontwerp en productie-ideeën; “Microsoft” (Microsoft) “wat u ziet is wat u krijgt” concept; “Google” (Google) eenvoudige en directe zakelijke stijl, zonder uitzondering, volg Het “kus” -principe. ^ [7] ^ </p>
<h4 id="4-3-2-Functie"><a href="#4-3-2-Functie" class="headerlink" title="4.3.2 Functie"></a>4.3.2 Functie</h4><p>Wees volgens het kusprincipe zo beknopt mogelijk. Voeg de keuzelijst van de knop Editbox toe<br>menu ^ [8] ^ De functies van deze bedieningselementen zijn als volgt: </p>
<ul>
<li>Bewerkingsbox <ul>
<li>Haal de string op die door de gebruiker moet worden doorzocht </li>
</ul>
</li>
<li>Knop <ol>
<li>Haal de string op in EditBox </li>
<li>Het teken is te kort om een ​​prompt weer te geven </li>
<li>Voeg een vergrootglasfoto toe, de functie is in één oogopslag duidelijk </li>
</ol>
</li>
<li>Keuzelijst <ol>
<li>Geef de overeenkomende bestandsnaam en het pad weer, dubbelklik om het bestand te openen </li>
<li>Voeg een horizontale schuifbalk toe, aangezien het pad relatief lang kan zijn </li>
<li>Dubbelklik op het resultaatbestandspad in de Listbox om het dubbelklikbestand te openen </li>
</ol>
</li>
<li>Menu <ul>
<li>Menu, u kunt case selecteren, zoekvolgorde </li>
</ul>
</li>
</ul>
<h3 id="4-4-Draad-samenvoegen"><a href="#4-4-Draad-samenvoegen" class="headerlink" title="4.4 Draad samenvoegen"></a>4.4 Draad samenvoegen</h3><h4 id="4-4-1-Waarom-lid-worden-van-threads"><a href="#4-4-1-Waarom-lid-worden-van-threads" class="headerlink" title="4.4.1 Waarom lid worden van threads"></a>4.4.1 Waarom lid worden van threads</h4><p>De voordelen van garens: garens zijn goedkoop. Thread start sneller, wordt sneller afgesloten en heeft een kleinere impact op systeembronnen. </p>
<p>Denk ook aan: </p>
<ol>
<li>Vanwege de beperking van io heeft het niet veel zin om meerdere threads te gebruiken om MFT tegelijkertijd op dezelfde harde schijf te lezen. </li>
<li>Schijftoegang tot MFT die zich in verschillende partities van dezelfde harde schijf bevindt, kan in plaats daarvan de snelheid beïnvloeden. Voor computers met meerdere harde schijven moet de efficiëntie aanzienlijk worden verbeterd. Gebruikers van meerdere harde schijven kunnen echter een RAID-array vormen. De beste oplossing zou moeten zijn om A-Z-schijven opeenvolgend te lezen. </li>
<li>Toen de MFC voor het eerst werd gemaakt, werd deze sequentieel uitgevoerd. Hierdoor kan de interface pas worden weergegeven nadat alle gegevensstatistieken zijn voltooid. In dit proces kunnen gebruikers gemakkelijk hun geduld verliezen. </li>
<li>Besluit tot slot een UI-thread, een achtergrondstatistieken van een werkthread. </li>
</ol>
<h4 id="4-4-2-Start-een-Worker-thread-in-MFC"><a href="#4-4-2-Start-een-Worker-thread-in-MFC" class="headerlink" title="4.4.2 Start een Worker-thread in MFC"></a>4.4.2 Start een Worker-thread in MFC</h4><p>MFC biedt al lang ondersteuning voor multithreading. In een typische MFC<br>In het programma gaat de ondersteuning van multithreading schuil achter veel geweldig werk. MFC<br>Zelfs pogingen om bepaalde Win32-concepten met betrekking tot multithreading te versterken. </p>
<p>Zowel GUI als werkthreads worden gestart met AfxBeginThread (), maar MFC gebruikt de overbelastende aard van C ++ - functies om twee verschillende declaraties voor deze functie te leveren. De compiler selecteert automatisch de juiste om te gebruiken op basis van de parameters die u opgeeft. ^ [9] ^ </p>
<p>Gebruik AfxBeginThread om de thread te starten.<br>pParam Elke 4-byte waarde, gebruikt om door te geven aan de nieuwe thread. Het kan een geheel getal zijn, of een pointer, of gewoon een nul. </p>
<p>Alleen de eerste twee parameters worden hier gebruikt, de thread-functie in het object en de objectpointer </p>
<p>U kunt twee threads zien in Taakbeheer, zoals weergegeven in Afbeelding 4-3 </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_03.jpg">Figuur 4-3 Taakbeheer toont het aantal threads</a> </p>
<p>Wanneer de werkdraad zijn taak heeft voltooid, wordt deze automatisch beëindigd en keert terug naar een thread. </p>
<h4 id="4-4-3-Minimaliseren-naar-het-systeemvak"><a href="#4-4-3-Minimaliseren-naar-het-systeemvak" class="headerlink" title="4.4.3 Minimaliseren naar het systeemvak"></a>4.4.3 Minimaliseren naar het systeemvak</h4><p>Nu klikken steeds meer programma’s op sluiten in de rechterbovenhoek, wat eigenlijk is geminimaliseerd tot het pictogram in het systeemvak. Om het programma af te sluiten, moet u met de rechtermuisknop op het pictogram in het systeemvak klikken om af te sluiten. </p>
<p>Realiseer minimalisatie zonder het programma te verlaten, u kunt bestanden gemakkelijk vinden. </p>
<p>1) Minimaliseer de weergave op de taakbalk. </p>
<p>2) Klik op Sluiten om het systeemvakpictogram af te sluiten zonder het in de taakbalk weer te geven; dubbelklik om te antwoorden op het weergavevenster. </p>
<p>3) Menu toevoegen aan systeemvakpictogram. </p>
<h3 id="4-5-Zoeken"><a href="#4-5-Zoeken" class="headerlink" title="4.5 Zoeken"></a>4.5 Zoeken</h3><h4 id="4-5-1-Jokerteken"><a href="#4-5-1-Jokerteken" class="headerlink" title="4.5.1 Jokerteken"></a>4.5.1 Jokerteken</h4><p>In daadwerkelijke toepassingen is het onmogelijk om de bestandsnaam duidelijk te onthouden, zoals test.2012-5-14.txt, wat vaak ‘test<br>.txt ”, dus fuzzy zoeken is nodig. Omdat onder de console de bestandsnaam &lt;bestandsnaam is,<br>pfrn&gt; Maak een hashtabel Als u fuzzy search wilt implementeren, wordt de hashtabel overbodig, u kunt direct de containervector gebruiken. </p>
<p>Volgens de feitelijke situatie is er geen strikt jokerteken vereist, “\ *?”<br>Kan de meeste zoekproblemen oplossen, en gebruikers kennen over het algemeen het gebruik van jokertekens niet, laat staan ​​reguliere expressies. Dus begin met ‘spatie’<br>Implementeer Baidu in plaats van “\ *?”<br>De zoekmethode van Google om trefwoorden te scheiden met spaties is een goede oplossing. \ * \ * \ * \ * </p>
<h4 id="4-5-2-Geval-bestelling"><a href="#4-5-2-Geval-bestelling" class="headerlink" title="4.5.2 Geval, bestelling"></a>4.5.2 Geval, bestelling</h4><p>Over het algemeen zijn er de volgende twee situaties: </p>
<ol>
<li>De gebruiker herinnert zich misschien niet het hoofdlettergebruik van de bestandsnaam of het pad </li>
<li>Soms zijn er te veel bestanden en kan strikt hoofdlettergebruik nodig zijn om de juiste bestanden te filteren </li>
<li>Ik kan me de volgorde van de trefwoorden niet herinneren </li>
</ol>
<p>Geef dus de volgende twee opties: </p>
<ol>
<li>Strikt geval </li>
<li>Geen bestelling </li>
</ol>
<p>Volgens de algemene situatie is de standaardinstelling: hoofdletterongevoelig, sequentieel zoeken </p>
<h4 id="4-5-3-Privacy-van-gebruikers-en-systeempad"><a href="#4-5-3-Privacy-van-gebruikers-en-systeempad" class="headerlink" title="4.5.3 Privacy van gebruikers en systeempad"></a>4.5.3 Privacy van gebruikers en systeempad</h4><ol>
<li>Bedenk dat sommige mappen worden gebruikt om de privébestanden van gebruikers op te slaan. </li>
<li>De systeemmap, zoals: <code>c: \ windows \ *</code> wordt niet gebruikt door gewone gebruikers. Dezelfde zoekopdracht zal alleen maar onnodige bestanden vergroten en het systeem belasten. </li>
</ol>
<p>Het is dus nodig om een ​​optie voor het uitsluiten van mappen toe te voegen, zoals weergegeven in Afbeelding 4-4 </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_06.jpg">Figuur 4-4 Interface voor map uitsluiten</a> </p>
<p>De bijbehorende functie is: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isIgnore</span><span class="params">( <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;\* pignorelist )</span> </span>&#123;</span><br><span class="line">	<span class="built_in">string</span> tmp = CW2A(path);</span><br><span class="line">	<span class="keyword">for</span> ( <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::iterator it = pignorelist-&gt;begin();</span><br><span class="line">		it != pignorelist-&gt;end(); ++it ) &#123;</span><br><span class="line">			<span class="keyword">size_t</span> i = it-&gt;length();</span><br><span class="line">			<span class="keyword">if</span> ( !tmp.compare(<span class="number">0</span>, i, \*it,<span class="number">0</span>, i) ) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-5-4-Implementatie"><a href="#4-5-4-Implementatie" class="headerlink" title="4.5.4 Implementatie"></a>4.5.4 Implementatie</h4><p>Nieuwe bijpassende stringklasse </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cmpStrStr</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	cmpStrStr(<span class="keyword">bool</span> uplow, <span class="keyword">bool</span> inorder) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;uplow = uplow;</span><br><span class="line">		<span class="keyword">this</span>-&gt;isOrder = inorder;</span><br><span class="line">	&#125;</span><br><span class="line">	~cmpStrStr() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">cmpStrFilename</span><span class="params">(CString str, CString filename)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">infilename</span><span class="params">(CString &amp;strtmp, CString &amp;filenametmp)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">bool</span> uplow;</span><br><span class="line">	<span class="keyword">bool</span> isOrder;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Doorkruis de VecNameCur in ** 4.2.1 **, geef de cmpStrFilename-overeenkomstfunctie door en verkrijg de overeenkomende bestandsnaam </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="built_in">vector</span>&lt;Name_Cur&gt;::const_iterator cit = VecNameCur.begin();</span><br><span class="line">	cit != VecNameCur.end(); ++cit) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> ( cmpstrstr.cmpStrFilename(str, cit-&gt;filename) ) &#123;</span><br><span class="line">		path.Empty();</span><br><span class="line">		<span class="comment">// 还原 路径</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// vol:\  path \ cit-&gt;filename</span></span><br><span class="line">		getPath(cit-&gt;pfrn, path);</span><br><span class="line">		path += cit-&gt;filename;</span><br><span class="line">		<span class="comment">// path已是全路径</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ( isIgnore(pignorelist) ) &#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		rightFile.push_back(path);</span><br><span class="line">		<span class="comment">//path.Empty();</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cmpStrFilename函数：</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> end = str.GetLength();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ( pos &lt; end ) &#123;</span><br><span class="line">	<span class="comment">// 对于str，取得 每个空格分开为的关键词</span></span><br><span class="line">	pos = str.Find( _T(<span class="string">&#x27; &#x27;</span>) );</span><br><span class="line"></span><br><span class="line">	CString strtmp;</span><br><span class="line">	<span class="keyword">if</span> ( pos == <span class="number">-1</span> ) &#123;</span><br><span class="line">		<span class="comment">// 无空格</span></span><br><span class="line">		strtmp = str;</span><br><span class="line">		pos = end;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		strtmp = str.Mid(<span class="number">0</span>, pos<span class="number">-0</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> ( !infilename(strtmp, filename) ) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	str.Delete(<span class="number">0</span>, pos);</span><br><span class="line">	str.TrimLeft(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>U kunt het algoritme voor het matchen van tekenreeksen gemakkelijk herschrijven in de infilename-functie om enkele uitbreidingen te krijgen </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CString <span class="title">filenametmp</span><span class="params">(filename)</span></span>;</span><br><span class="line"><span class="keyword">int</span> pos;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( !uplow ) &#123;</span><br><span class="line">	<span class="comment">// 大小写敏感</span></span><br><span class="line">	filenametmp.MakeLower();</span><br><span class="line">	pos = filenametmp.Find(strtmp.MakeLower());</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	pos = filenametmp.Find(strtmp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( <span class="number">-1</span> == pos ) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( !isOrder ) &#123;</span><br><span class="line">	<span class="comment">// 无顺序</span></span><br><span class="line">	filename.Delete(<span class="number">0</span>, pos+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-5-5-Paduitvoer"><a href="#4-5-5-Paduitvoer" class="headerlink" title="4.5.5 Paduitvoer"></a>4.5.5 Paduitvoer</h4><p>Na het verkrijgen van de overeenkomende bestandsnaam, is de volgende stap om het systeempad van het bestand op te halen. Geef de volledige naam van de overeenkomende bestandsnaam die hierboven is verkregen door in de frnPfrnNameMap-hashtabel die is geconstrueerd in ** 4.2.2 ** om het pad recursief te krijgen. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CString <span class="title">Volume::getPath</span><span class="params">(DWORDLONG frn, CString &amp;path)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查找2</span></span><br><span class="line">	Frn_Pfrn_Name_Map::iterator it = frnPfrnNameMap.find(frn);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (it != frnPfrnNameMap.end()) &#123;</span><br><span class="line"></span><br><span class="line">		  <span class="keyword">if</span> ( <span class="number">0</span> != it-&gt;second.pfrn ) &#123;</span><br><span class="line">		 	  getPath(it-&gt;second.pfrn, path);</span><br><span class="line">		  &#125;</span><br><span class="line"></span><br><span class="line">		  path += it-&gt;second.filename;</span><br><span class="line">		  path += ( _T(<span class="string">&quot;\&quot;) );</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	return path;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-Complexiteitsanalyse"><a href="#5-Complexiteitsanalyse" class="headerlink" title="5 Complexiteitsanalyse"></a>5 Complexiteitsanalyse</h2><h3 id="5-1-Tijdscomplexiteit"><a href="#5-1-Tijdscomplexiteit" class="headerlink" title="5.1 Tijdscomplexiteit"></a>5.1 Tijdscomplexiteit</h3><p>In theorie is de tijdcomplexiteit: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_05.jpg">Figuur 5-1 Complexiteitsanalyse</a> </p>
<p>Op de AMD Athlon (tm) II X2 245 2,9 GHz-processor is het resultaat vrijwel onmiddellijk. </p>
<h3 id="5-2-Complexiteit-van-de-ruimte"><a href="#5-2-Complexiteit-van-de-ruimte" class="headerlink" title="5.2 Complexiteit van de ruimte"></a>5.2 Complexiteit van de ruimte</h3><p>Vanwege het enorme aantal computerbestanden, meestal 10W-100W, kan het geheugengebruik van het programma zelf worden genegeerd. </p>
<p>234.708 bestanden over 43M. </p>
<p>Voor systemen met ten minste 2G geheugen vandaag, is het geen last. </p>
<h2 id="6-ondervonden-problemen"><a href="#6-ondervonden-problemen" class="headerlink" title="6 ondervonden problemen"></a>6 ondervonden problemen</h2><h3 id="6-1-Kan-USN-bestand-niet-initialiseren"><a href="#6-1-Kan-USN-bestand-niet-initialiseren" class="headerlink" title="6.1 Kan USN-bestand niet initialiseren"></a>6.1 Kan USN-bestand niet initialiseren</h3><p>De O-schijf op de computer kan het USN-logbestand niet initialiseren. Door foutopsporing is vastgesteld dat: </p>
<p>DeviceIoControl retourneert 0, GetLastError 0x70 </p>
<p>Controleer msdn, de reden is ERROR_SHARING_PAUSED </p>
<p>Het blijkt dat ik ben vergeten te initialiseren en de volgende code toe te voegen, het programma heeft normaal toegang tot de O-schijf </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE_USN_JOURNAL_DATA cujd;</span><br><span class="line">cujd.MaximumSize = <span class="number">0</span>; <span class="comment">// 0表示使用默认值</span></span><br><span class="line">cujd.AllocationDelta = <span class="number">0</span>; <span class="comment">// 0表示使用默认值</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2-Het-probleem-van-wchar-en-char-onder-unicode"><a href="#6-2-Het-probleem-van-wchar-en-char-onder-unicode" class="headerlink" title="6.2 Het probleem van wchar en char onder unicode"></a>6.2 Het probleem van wchar en char onder unicode</h3><p>Aanvankelijk werd in termen van stringverwerking de standaard bibliotheekfunctietekenreeks gebruikt als verwerkingsmethode, maar in unicode<br>Het volgende is een dubbelbyte wchar, die veel problemen heeft gekregen bij het converteren van string. Ten slotte wordt CString gebruikt als de standaard string en \ _T (“”) wordt gebruikt om de string te initialiseren. </p>
<h3 id="6-3-ifdef-positieprobleem"><a href="#6-3-ifdef-positieprobleem" class="headerlink" title="6.3 #ifdef positieprobleem"></a>6.3 #ifdef positieprobleem</h3><p>\ #ifdef, er kunnen geen breekpunten in worden gezet, en toen merkte ik dat #define voor include was geschreven. </p>
<h3 id="6-4-Parameteroverdracht"><a href="#6-4-Parameteroverdracht" class="headerlink" title="6.4 Parameteroverdracht"></a>6.4 Parameteroverdracht</h3><p>Ik begon te ontwerpen met procesgeoriënteerd denken en kreeg de moeite om dezelfde handle door te geven door parameters door te geven, maar later veranderde het in een klassemethode om veel te verbeteren. </p>
<h2 id="7-kleine-optimalisaties"><a href="#7-kleine-optimalisaties" class="headerlink" title="7 kleine optimalisaties"></a>7 kleine optimalisaties</h2><h3 id="7-1-Leessnelheid"><a href="#7-1-Leessnelheid" class="headerlink" title="7.1 Leessnelheid"></a>7.1 Leessnelheid</h3><p>Bij het construeren van de hash-functie werden drie methoden bedacht en werden respectievelijk experimenten uitgevoerd, waarbij de tijdfunctie werd gebruikt om de bestede tijd te tellen. De resultaten zijn als volgt: </p>
<p>1) Na het wijzigen van de code, lees de usn één keer, sla het op in een tijdelijk bestand, lees en bouw de hashtabel </p>
<p>Elke run, de gemiddelde tijd is ongeveer 27 seconden </p>
<p>2) Gebruik vector om gegevens in het geheugen op te slaan, na het loslaten, </p>
<p>Het resultaat is verheugend, en de tijd is met bijna 10 keer verlengd! ! ! Zoals weergegeven in afbeelding 7-1: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_06.jpg">7-1 Doorkruis alle schijven</a> </p>
<p>Het is volledig binnen het acceptabele bereik. </p>
<p>De eerste run duurt duidelijk lang, en dan wordt het bestand voorgelezen uit de schijfcache en stijgt de snelheid. De analysehotspot moet in de zoektijd van de schijf en het lezen van bestanden liggen. </p>
<h3 id="7-2-Open-bestandsmethode"><a href="#7-2-Open-bestandsmethode" class="headerlink" title="7.2 Open bestandsmethode"></a>7.2 Open bestandsmethode</h3><p>Dubbelklik in ** 4.3.2 ** op het bestandspad in de ListBox om het antwoordbestand te openen. In het begin werd de systeemfunctie () gebruikt, maar er verschijnt een zwart consolevenster en het hoofdvenster wordt vergrendeld, enz. De uitvoering kan alleen worden voortgezet nadat het bestand is gesloten, wat zeer nadelig is voor de gebruikerservaring. Roep in plaats daarvan de ShellExecute-functie aan om een ​​nieuw proces te openen en het hoofdvenster kan verder worden uitgevoerd. </p>
<h3 id="7-3-Voortgangsbalk"><a href="#7-3-Voortgangsbalk" class="headerlink" title="7.3 Voortgangsbalk"></a>7.3 Voortgangsbalk</h3><p>Nadat de V1.0-versie was uitgebracht, was er geen prompt wanneer sommige studenten het bestand met achtergrondstatistieken rapporteerden, dus ik weet niet wanneer het zal worden voltooid. Dus een voortgangsbalk is toegevoegd aan de onderkant van de hoofdinterface om de interactiviteit te verbeteren, zoals weergegeven in de afbeelding<br>7-2: </p>
<p>! <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/QSearch_07.jpg">Figuur 7-2 Voortgangsbalk</a> </p>
<p>Natuurlijk heeft de thread-functie ook de nodige wijzigingen aangebracht: </p>
<h1 id="8-Conclusie"><a href="#8-Conclusie" class="headerlink" title="8 Conclusie"></a>8 Conclusie</h1><p>Tot dusver zijn de basisfuncties van het programma voltooid.Tests op meerdere computers en verschillende systemen (XP en latere Windows-series) hebben in principe geen onderbroken animaties en het programma loopt vast. </p>
<p>Vanwege tijd en andere redenen zijn er nog steeds veel functies die niet zijn geïmplementeerd, zoals de interface die niet kan worden uitgebreid en de bestandsgegevens niet dynamisch kunnen worden verzameld. </p>
<h1 id="referenties"><a href="#referenties" class="headerlink" title="referenties"></a>referenties</h1><p>[1] Whitepaper over hardware. NTFS-bestandssysteemspecificatie [OL]. Baidu Library, 2011: 30.<br>[2] Beiyu. Onderzoek naar verschillende technologieën van het NTFS-bestandssysteem [OL]. 2007: 7.<br>[3] Baby’s. Interactieve encyclopedie [OL]. Http://<a target="_blank" rel="noopener" href="http://www.hudong.com/wiki/ntfs">www.hudong.com/wiki/ntfs</a><br>[4] Microsoft. MSDN-bibliotheek [OL]. 2012:<br>[5] Stanley B.Lippman / Josée LaJoie / Barbara E.Moo. C \ + \ + Primer [M]. Addison-Wesley Professional, 2006: 10.3.2016<br>[6] Eric S. Raymond. Vertalers: Jiang Hong, He Yuan, Cai Xiaojun. The Art of UNIX Programming [m]. Publishing House of Electronics Industry, 2006:<br>[7] Chen Hao. Enkele principes van softwareontwerp [OL]. Http://coolshell.cn/articles/4535.html<br>[8] Sun Xin. VC ++ diepgaande gedetailleerde uitleg [m]. Electronics Industry, 2006<br>[9] Jim Beveridge / Robert Wiener. Multithreading-toepassingen in Win32: de complete gids voor threads<br>[10] Addison-Wesley Professional, 1996: 223-243 </p>
<h1 id="Engelse-samenvatting"><a href="#Engelse-samenvatting" class="headerlink" title="Engelse samenvatting"></a>Engelse samenvatting</h1><p>** Snelle positionering van de NTFS-schijfbestanden ** </p>
<p>LE IH Oostenrijk </p>
<p>(School of Information &amp; Computer, Anhui Agricultural University, Hefei 230036) </p>
<p>** Samenvatting **: Dit artikel beschrijft op Windows NTFS-schijf, de<br>opsomming van alle namen van de bestanden en mappen op de harde schijf,<br>en om een hashtabel te bouwen met behulp van C ++ STL, MFC GUI en werkthread.<br>Uiteindelijk moet de gebruiker trefwoorden invoeren, zoals een simpele zoekopdracht zoals google<br>trefwoord zoeken, en dan onmiddellijk alle overeenkomende bestanden / mappen retourneren<br>en hun systeempad. </p>
<p>** Sleutelwoorden: ** NTFS, Snel, Zoeken, Trefwoorden, Bestandspad </p>

    </div>

    
    
    
      
  <div class="popular-posts-header">Related Posts</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/nl/Go-Web/" rel="bookmark">Ga naar het web</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/nl/Learn-Go-in-20-days/" rel="bookmark">Leer Go in 20 dagen</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/nl/ios-developer-account-and-app-store/" rel="bookmark">iOS-ontwikkelaarsaccount en hoe u dit kunt vermelden</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/nl/count-lines-of-code/" rel="bookmark">Aantal regels code</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/nl/A-simple-VS-between-Sinatra-and-Martini/" rel="bookmark">Een simpele VS. tussen Sinatra en Martini</a></div>
    </li>
  </ul>


    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me 👨‍💻 a coffee ☕️</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    Doneer
  </button>
  <div class="post-reward">
      <div>
        <img src="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/wechat.png" alt="LeiHao WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/alipay.png" alt="LeiHao Alipay">
        <span>Alipay</span>
      </div>
      <div>
        <img src="https://raw.githubusercontent.com/LeiHao0/BlogAssets/assets/bitcoin.png" alt="LeiHao Bitcoin">
        <span>Bitcoin</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/nl/tags/programming/" rel="tag"># Programming</a>
              <a href="/nl/tags/everything/" rel="tag"># Everything</a>
              <a href="/nl/tags/ntfs/" rel="tag"># NTFS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
            </div>
            <div class="post-nav-item">
                <a href="/nl/Before-graduation/" rel="next" title="Meer dan tien dagen voor het afstuderen">
                  Meer dan tien dagen voor het afstuderen <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 2012 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-laptop-code"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LeiHao</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Symbols count total">574k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">8:42</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/nl/js/utils.js"></script><script src="/nl/js/next-boot.js"></script>

  




  <script src="/nl/js/local-search.js"></script>















  








  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://Artwalk.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://leihao0.github.io/nl/QSearch/";
    this.page.identifier = "QSearch/";
    this.page.title = "Het principe en de realisatie van alles";
    };
  NexT.utils.loadComments('#disqus_thread', () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://Artwalk.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
